<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Developing Executable Test Suites</title>
<link rel="stylesheet" href="../stylesheets/etf.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="shortcut icon" href="../images/favicon.ico" type="image/vnd.microsoft.icon" />
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of contents</div>
<ul class="sectlevel0">
<li><a href="#_developing_executable_test_suites">Developing Executable Test Suites</a>
<ul class="sectlevel1">
<li><a href="#_changelog">Changelog</a></li>
<li><a href="#_about_etf">About ETF</a></li>
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_information_and_concepts_used_by_all_executable_test_suites">2. Information and concepts used by all Executable Test Suites</a>
<ul class="sectlevel2">
<li><a href="#_overview">2.1. Overview</a></li>
<li><a href="#message-template-bundles">2.2. Message template bundles</a></li>
<li><a href="#tags">2.3. Tags</a></li>
<li><a href="#test-object-types">2.4. Test object types</a></li>
<li><a href="#test-item-types">2.5. Test item types</a></li>
<li><a href="#attachments">2.6. Attachments</a></li>
</ul>
</li>
<li><a href="#_basex_based_test_suites">3. BaseX-based test suites</a>
<ul class="sectlevel2">
<li><a href="#_required_knowledge">3.1. Required knowledge</a></li>
<li><a href="#_development_environment">3.2. Development environment</a></li>
<li><a href="#_basics">3.3. Basics</a></li>
<li><a href="#typical-setup">3.4. Typical setup</a></li>
<li><a href="#xml-document-of-an-executable-test-suite">3.5. XML document of an Executable Test Suite</a></li>
<li><a href="#the-xquery-document">3.6. The XQuery document</a></li>
<li><a href="#the-prepare-chunk-document">3.7. The prepare-chunk document</a></li>
<li><a href="#spatial-tests">3.8. Testing spatial aspects</a></li>
<li><a href="#parameters">3.9. Parameters</a></li>
<li><a href="#basex-test-object-types">3.10. Test Object Types</a></li>
<li><a href="#basex-test-item-types">3.11. Test Item Types</a></li>
<li><a href="#_dependencies">3.12. Dependencies</a></li>
<li><a href="#_tags">3.13. Tags</a></li>
<li><a href="#_statistical_information">3.14. Statistical information</a></li>
<li><a href="#basex-attachments">3.15. Attachments</a></li>
<li><a href="#_schematron">3.16. Schematron</a></li>
</ul>
</li>
<li><a href="#_soapui_based_test_suites">4. SoapUI based Test Suites</a>
<ul class="sectlevel2">
<li><a href="#_required_knowledge_2">4.1. Required knowledge</a></li>
<li><a href="#_development_environment_2">4.2. Development environment</a></li>
<li><a href="#_basics_2">4.3. Basics</a></li>
<li><a href="#_parameters_and_metadata_properties">4.4. Parameters and metadata properties</a></li>
<li><a href="#soapui-test-object-types">4.5. Test Object Types</a></li>
<li><a href="#soapui-test-item-types">4.6. Test Item Types</a></li>
<li><a href="#soapui-attachments">4.7. Attachments</a></li>
<li><a href="#_assertion_library">4.8. Assertion library</a></li>
<li><a href="#_translation_templates">4.9. Translation Templates</a></li>
<li><a href="#_mapping_limitations_from_soapui_concepts_to_etf">4.10. Mapping limitations from SoapUI concepts to ETF</a></li>
<li><a href="#_tips_for_creating_helpful_test_suites">4.11. Tips for creating helpful test suites</a></li>
</ul>
</li>
<li><a href="#_team_engine_based_test_suites">5. TEAM-Engine-based test suites</a>
<ul class="sectlevel2">
<li><a href="#_overview_7">5.1. Overview</a></li>
<li><a href="#_team_engine_test_suites_supported_by_etf">5.2. TEAM Engine test suites supported by ETF</a></li>
<li><a href="#_mapping_from_team_engine_testng_concepts_to_etf">5.3. Mapping from TEAM Engine / TestNG concepts to ETF</a></li>
<li><a href="#te-attachments">5.4. Attachments</a></li>
</ul>
</li>
<li><a href="#_glossary">Glossary</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<table class="tableblock frame-none grid-none stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><span class="image"><a class="image" href="http://www.etf-validator.net"><img src="http://docs.etf-validator.net/v2.0/images/ETF_logo.png" alt="ETF Logo" width="125"></a></span></p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock"><span class="etf_headline"><strong>ETF</strong><br>
Testing framework for spatial data and services</span></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<h1 id="_developing_executable_test_suites" class="sect0">Developing Executable Test Suites</h1>
<div class="openblock partintro">
<div class="content">
<table class="tableblock frame-topbot grid-none stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Status</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">approved</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Date</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-06-21</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Description</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This document is a guide on how to develop Executable Test Suites for ETF using the test engines SoapUI, BaseX and the TEAM Engine.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Target audience</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Everyone planning to develop or edit Executable Test Suites</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Licence</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution (cc-by) 4.0</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Identifier</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.etf-validator.net/v2.0/Developer_manuals/Developing_Executable_Test_Suites.html" class="bare">https://docs.etf-validator.net/v2.0/Developer_manuals/Developing_Executable_Test_Suites.html</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Language</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EN</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_changelog">Changelog</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Date</strong></th>
<th class="tableblock halign-left valign-top"><strong>Editor</strong></th>
<th class="tableblock halign-left valign-top"><strong>Comments</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2016-09-08</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clemens Portele</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BaseX documentation created</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-06-09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BaseX documentation updated and merged</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-06-13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SoapUI documentation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-06-21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann, Clemens Portele</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Revision after review</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-09-13</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Schematron section added</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-11-25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spatial indexing section updated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2017-12-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Message template bundles section updated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2018-07-10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Jon Herrmann</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links updated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2020-05-06</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Christoph Spalek</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Add prepare-chunk section</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
<!-- toc disabled -->
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_about_etf">About ETF</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="http://etf-validator.net">ETF</a> is an open source testing framework for validating spatial data, metadata and web services in Spatial Data Infrastructures (SDIs). It can be used via a responsive web application or via a REST API.</p>
</div>
<div class="paragraph">
<p>The design of ETF is driven by three goals: be user-friendly, consistent with the standards and capable of testing all resources in an SDI.</p>
</div>
<div class="paragraph">
<p><a href="http://www.interactive-instruments.de/">interactive instruments</a> has developed ETF and is the primary maintainer of the software.</p>
</div>
<div class="paragraph">
<p><a href="http://docs.etf-validator.net/">More documentation about ETF&#8230;&#8203;</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is a guide on how to develop Executable Test Suites for ETF using the test engines SoapUI, BaseX and the TEAM Engine.</p>
</div>
<div class="paragraph">
<p>The concepts in ETF are based on ISO 19105 and the OGC Specification Model. Key concepts introduced by these two standards are Conformance Classes and Executable Test Suites.</p>
</div>
<div class="paragraph">
<p>A Conformance Class is a set of requirements defined in a specification. To pass the conformance class, a resource claiming conformance with that class must meet all the requirements.</p>
</div>
<div class="paragraph">
<p>An Executable Test Suite is a collection of tests that validates a resource against all the requirements in the associated Conformance Class.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../images/req-ats-cc-ets.png" alt="req ats cc ets"></span></p>
</div>
<div class="paragraph">
<p>ETF is built on these concepts as they underpin the standards and specifications that are used in Spatial Data Infrastructures and that are typically tested by validators based on ETF.</p>
</div>
<div class="paragraph">
<p>The resources that we want to test with ETF have different characteristics.</p>
</div>
<div class="paragraph">
<p>When testing GML data, test expressions will typically use XPath to express the assertions. Typical challenges in this case are performance for large datasets (10s or 100s of Gigabytes) and testing spatial aspects.</p>
</div>
<div class="paragraph">
<p>When we test an OGC web service, for example a Web Feature Service, the execution of the tests needs to be dynamic. The capabilities of the service need to be analyzed, test cases and assertions need to be generated based on the analysis of the feature types, their properties, the coordinate reference systems, the stored queries, the filter capabilities supported, etc. As a result, the execution of a test suite is a complex interaction between the validator and the web service and the Executable Test Suite not only needs to test responses from the web service, but also determine from the response what needs to be tested.</p>
</div>
<div class="paragraph">
<p>To address the different challenges properly, ETF supports different tools ("test engines") to execute Executable Test Suites. Currently supported are the following test engines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://soapui.org/">SoapUI</a>, a widely used tool for testing web services</p>
</li>
<li>
<p><a href="http://basex.org/">BaseX</a>, an XML database, for testing sets of XML documents - including very large ones</p>
</li>
<li>
<p><a href="http://opengeospatial.github.io/teamengine">TEAM Engine</a>, the tool used by the OGC CITE tests, to support the modern CITE tests developed using TestNG</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The BaseX extension module <a href="https://github.com/etf-validator/etf-gmlgeox">GmlGeoX</a> extends XQuery to enable testing spatial aspects of GML features (geometry validation, spatial indexing, spatial predicates).</p>
</div>
<div class="paragraph">
<p>Due to the different characteristics of the test engines, the development of an Executable Test Suite is very different for each test engine.</p>
</div>
<div class="paragraph">
<p>For each of the supported test engines, ETF has specified a mapping from the concepts of the test engine to the ETF concepts so that test results in ETF are homogenous - whatever test engines are used in a test run.</p>
</div>
<div class="paragraph">
<p>This guide, therefore, describes how to use the test engines in a way that is consistent with the ETC concepts. It is <strong>not</strong> a tutorial for the test engines (SoapUI, BaseX, TEAM Engine) or the relevant technologies (XML, XQuery, HTTP, Groovy, etc.). We assume working knowledge with the relevant tools and technologies. We have included links that should help to familiarize yourself with the relevant tools and technologies, where this is needed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_information_and_concepts_used_by_all_executable_test_suites">2. Information and concepts used by all Executable Test Suites</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview">2.1. Overview</h3>
<div class="paragraph">
<p>All Executable Test Suites can make use of and reference generic information items that is used by ETF to organize Executable Test Suites and present test reports to a user.</p>
</div>
<div class="paragraph">
<p>How these items are referenced in the different types of Executable Test Suites is described in the section for each test engine.</p>
</div>
<div class="paragraph">
<p>These items are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Collections of multi-lingual message templates for use in test reports for one or more Executable Test Suites</p>
</li>
<li>
<p>Tags that may be associated with an Executable Test Suite to support grouping and filtering</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These items that stored as XML documents in the  <code>include-metadata</code>
directory of an ETF deployment (see the <a href="http://docs.etf-validator.net/Admin_manuals/index.html#_etf_data_directory_structure">description of the ETF directory structure</a>).</p>
</div>
</div>
<div class="sect2">
<h3 id="message-template-bundles">2.2. Message template bundles</h3>
<div class="paragraph">
<p>Message templates are collected in an XML document with a root element
<code>etf:TranslationTemplateBundle</code>. The file name must start with the
prefix "TranslationTemplateBundle" and must be located in the directory
<code>include-metadata</code>. The <code>id</code> attribute must be a unique UUID, prefixed with "EID".</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/include-metadata/generic-ettb.xml">generic-ettb.xml</a>
can be used as a starting point for a translation template bundle. Do
not forget to change the <code>id</code> attribute to a different UUID.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 1. Message templates used for Executable Test Suites in INSPIRE</div>
<div class="content">
<div class="paragraph">
<p>The template bundle for the BaseX-based tests in the INSPIRE validator is
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/include-metadata/TranslationTemplateBundle-EID70a263c0-0ad7-42f2-9d4d-0d8a4ca71b52.xml">TranslationTemplateBundle-EID70a263c0-0ad7-42f2-9d4d-0d8a4ca71b52.xml</a>.</p>
</div>
<div class="paragraph">
<p>The template bundle for the SoapUI-based tests in the INSPIRE validator is
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/include-metadata/TranslationTemplateBundle-EIDfadd4929-fa60-4781-b658-703bbfe3f4eb.xml">TranslationTemplateBundle-EIDfadd4929-fa60-4781-b658-703bbfe3f4eb.xml</a>.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Each message template is in an <code>etf:LangTranslationTemplateCollection</code>
element and includes an <code>etf:TranslationTemplate</code> per language for the
same message. The language is encoded in the <code>language</code> attribute using
language codes used in HTTP headers, e.g. "en" for English.</p>
</div>
<div class="paragraph">
<p>The placeholders are embedded in curly brackets, e.g. "{filename}".</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
All names must start with "TR." and may only use the following characters: "a"-"z", "A"-"Z", "0"-"9", ".", "-", "_". The length is restricted to 85 characters.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The <code>name</code> of an <code>etf:LangTranslationTemplateCollection</code> must be globally unique.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The <code>name</code> attribute values of an <code>etf:LangTranslationTemplateCollection</code> element and its <code>etf:TranslationTemplate</code> elements must be identical.
</td>
</tr>
</table>
</div>
<div class="exampleblock">
<div class="title">Example 2. A single message template in two languages</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;TranslationTemplateBundle xmlns=&quot;http://www.interactive-instruments.de/etf/2.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.interactive-instruments.de/etf/2.0 https://resources.etf-validator.net/schema/v2/val/ignoreRef.xsd&quot;
   id=&quot;EID27117afb-11aa-4e45-aa3d-0e1e65bdccb8&quot;&gt;
    &lt;translationTemplateCollections&gt;
      &lt;LangTranslationTemplateCollection name=&quot;TR.invalidSchema&quot;&gt;
         &lt;translationTemplates&gt;
            &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.invalidSchema&quot;&gt;XML document &#39;{filename}&#39;: The file has {count} schema validation error(s).&lt;/TranslationTemplate&gt;
            &lt;TranslationTemplate language=&quot;de&quot; name=&quot;TR.invalidSchema&quot;&gt;XML Dokument &#39;{filename}&#39;: Die Datei hat {count} Schema Validierungsfehler.&lt;/TranslationTemplate&gt;
         &lt;/translationTemplates&gt;
      &lt;/LangTranslationTemplateCollection&gt;
    &lt;/translationTemplateCollections&gt;
&lt;/TranslationTemplateBundle&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Since the name of a LangTranslationTemplateCollection must be globally unique and
Executable Test Suite can only reference exactly one Translation Template Bundle
this can cause a problem if multiple Executable Test Suites share the
same error messages.</p>
</div>
<div class="paragraph">
<p>Therefore, identical error messages can be outsourced into a new
TranslationTemplateBundle which can then be extended with Test Suite specific error
messages by using the <code>etf:parent</code> property. The extension of the above Translation
Template Bundle could look like this (notice the parent element):</p>
</div>
<div class="exampleblock">
<div class="title">Example 3. Extending an existing message template</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;TranslationTemplateBundle xmlns=&quot;http://www.interactive-instruments.de/etf/2.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.interactive-instruments.de/etf/2.0 https://resources.etf-validator.net/schema/v2/val/ignoreRef.xsd&quot;
   id=&quot;EID7766b3e6-b7ac-452e-b3c3-c793a591e86c&quot;&gt;
    &lt;parent ref=&quot;EID27117afb-11aa-4e45-aa3d-0e1e65bdccb8&quot;/&gt;
    &lt;translationTemplateCollections&gt;
      &lt;LangTranslationTemplateCollection name=&quot;TR.incorrectRoot&quot;&gt;
         &lt;translationTemplates&gt;
            &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.incorrectRoot&quot;&gt;XML document &#39;{filename}&#39;: The root element is not one of the recognised feature collections: wfs:FeatureCollection (WFS 1.1 or WFS 2.0) or gml:FeatureCollection (GML 3.1 or GML 3.2). The name of the root element is &#39;{elementName}&#39; in namespace &#39;{namespace}&#39;.&lt;/TranslationTemplate&gt;
            &lt;TranslationTemplate language=&quot;de&quot; name=&quot;TR.incorrectRoot&quot;&gt;XML-Dokument &#39;{filename}&#39;: Das Wurzelelement ist keines der erwarteten Feature-Collection-Elemente: wfs:FeatureCollection (WFS 1.1 oder WFS 2.0) oder gml:FeatureCollection (GML 3.1 oder GML 3.2). Der Name des Wurzelelements is &#39;{elementName}&#39; im Namensraum &#39;{namespace}&#39;.&lt;/TranslationTemplate&gt;
         &lt;/translationTemplates&gt;
      &lt;/LangTranslationTemplateCollection&gt;
    &lt;/translationTemplateCollections&gt;
&lt;/TranslationTemplateBundle&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="tags">2.3. Tags</h3>
<div class="paragraph">
<p>Items may be associated with tags. If Executable Test Suites are
associated with tags, the ETF web application groups them by tags.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
How Execuable Test Suites are associated with tags differs between test engines and is described in the test engine sections.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tags are an XML document with a root element <code>etf:Tag</code>. The file name must start with the prefix "Tag" and must be located in the directory <code>include-metadata</code>. The <code>id</code> attribute must be a unique UUID, prefixed with "EID".</p>
</div>
<div class="paragraph">
<p>The tag has a label and a description. If a priority value is provided for a tag, the web application sorts the tags in the order of ascending priority values.</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. Tags defined in the INSPIRE validator</div>
<div class="content">
<div class="paragraph">
<p>The INSPIRE validator uses <a href="https://github.com/inspire-eu-validation/ets-repository/tree/master/include-metadata">several tags</a> to organize its Executable Test Suites. One of the tags is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;Tag xmlns=&quot;http://www.interactive-instruments.de/etf/2.0&quot; id=&quot;EIDfe1f3796-0ebf-4960-a6f7-f935e087fa4b&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://www.interactive-instruments.de/etf/2.0 https://resources.etf-validator.net/schema/v2/val/ignoreRef.xsd&quot;&gt;
	&lt;label&gt;Data Theme: Administrative Units (Data Specification version 3.1)&lt;/label&gt;
	&lt;description&gt;Tests for conformance classes specific to features of the data theme &#39;Administrative Units&#39;.&lt;/description&gt;
	&lt;priority&gt;202&lt;/priority&gt;
&lt;/Tag&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="test-object-types">2.4. Test object types</h3>
<div class="paragraph">
<p>A Test Object Type is a classification of a test object. Every Executable Test Suite in ETF declares which types of test objects it supports. This allows to determine which Executable Test Suites may be included in a test run against a test object. Test object types are structured in a hierarchical vocabulary.</p>
</div>
<div class="paragraph">
<p>The Test Object Types are used to check whether two or more Executable Test Suites can be executed on the same test object together in one Test Run.</p>
</div>
<div class="paragraph">
<p>Every test engine supports one or more Test Object Types. The types supported by each test engine are described in the section on the test engines (<a href="#basex-test-object-types">BaseX</a>, <a href="#soapui-test-object-types">SoapUI</a>). For the TEAM Engine, the applicable types from the other test engines are specified for <a href="#te-test-suites">each TEAM Engine test suite</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="test-item-types">2.5. Test item types</h3>
<div class="paragraph">
<p>Each test step and test assertion is classified depending on the characteristics of the item. As the classification depends on the test engine, the pre-defined test item types for each test engine are specified in the section of the test engine (<a href="#basex-test-item-types">BaseX</a>, <a href="#soapui-test-ietm-types">SoapUI</a>). For the TEAM Engine internal test item types are created, but these are not visible to test developers.</p>
</div>
</div>
<div class="sect2">
<h3 id="attachments">2.6. Attachments</h3>
<div class="paragraph">
<p>Additional files may be "attached" to a test result. These includes log files, statistical information, service requests and responses, etc. The attachments are linked from or embeded in the test reports in HTML to provide additional information about the test run.</p>
</div>
<div class="paragraph">
<p>The details depend on the test engine and the attachments that may occur for each test engine and are documented in the section of the test engine (<a href="#basex-attachments">BaseX</a>, <a href="#soapui-attachments">SoapUI</a>, <a href="#te-attachments">TEAM Engine</a>).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basex_based_test_suites">3. BaseX-based test suites</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_required_knowledge">3.1. Required knowledge</h3>
<div class="paragraph">
<p>To develop Executable Test Suites for testing XML documents in ETF using BaseX,
you should be familiar with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.w3.org/TR/xquery-31/">XQuery</a> and XML technologies in general</p>
</li>
<li>
<p>the ETF domain model items</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://resources.etf-validator.net/schema/v2/doc/test_xsd.html#ExecutableTestSuite"> Executable Test Suite</a></p>
</li>
<li>
<p><a href="http://resources.etf-validator.net/schema/v2/doc/capabilities_xsd.html#TestObject">Test Object</a></p>
</li>
<li>
<p><a href="http://resources.etf-validator.net/schema/v2/doc/run_xsd.html#TestTask">Test Task</a></p>
</li>
<li>
<p><a href="http://resources.etf-validator.net/schema/v2/doc/result_xsd.html#TestTaskResult">Test Task Result</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_environment">3.2. Development environment</h3>
<div class="paragraph">
<p>An BaseX Executable Test Suite is typically developed and tested using the
BaseX GUI application.</p>
</div>
<div class="sect3">
<h4 id="_installation">3.2.1. Installation</h4>
<div class="paragraph">
<p>For guidance on downloading and installing BaseX see the
<a href="http://basex.org/products/download/all-downloads/">BaseX website</a>. It is
recommended to use the same version that is also used by ETF, currently
version 8.6.</p>
</div>
<div class="paragraph">
<p>Two additional modules should be installed in the local BaseX
installation as they are frequently used in Executable Test Suites:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the standard functx module</p>
</li>
<li>
<p>the <a href="https://github.com/interactive-instruments/etf-gmlgeox">GmlGeoX
module</a> for spatial extensions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To add the functx module, select "Options", then "Packages&#8230;&#8203;", then
"Install from URI&#8230;&#8203;", enter the URI
"http://files.basex.org/modules/expath/functx-1.0.xar" and press "OK".</p>
</div>
<div class="paragraph">
<p>To add the GmlGeoX module,
<a href="https://services.interactive-instruments.de//etfdev-af/etf-public-dev/de/interactive_instruments/etf/bsxm/etf-gmlgeox/">download
the latest version of the JAR file</a> using <code>etf-public-dev</code> as user
and password. Select again "Options", then "Packages&#8230;&#8203;", then
"Install&#8230;&#8203;" and navigate to the JAR file. Press "Choose".</p>
</div>
</div>
<div class="sect3">
<h4 id="_executing_tests">3.2.2. Executing tests</h4>
<div class="paragraph">
<p>To execute a test suite against a set of XML documents follow these
steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Load the XML documents into a new database</p>
</li>
<li>
<p>Select "Database" &gt; "New&#8230;&#8203;" in the menu.</p>
</li>
<li>
<p>Select the XML document or the directory with the XML document or a
ZIP file with the XML documents.</p>
</li>
<li>
<p>Use a database name that ends in "-0".</p>
</li>
<li>
<p>If necessary, add additional file patterns beside "*.xml".</p>
</li>
<li>
<p>In the tab "Parsing" check "Use internal XML parser".</p>
</li>
<li>
<p>Leave all other options unchanged and press "OK".</p>
</li>
<li>
<p>Open the XQuery document (see <a href="#the-xquery-document">below</a> for more information) in the editor.</p>
</li>
<li>
<p>Search for the declaration of the following variables and set their
default values:</p>
</li>
<li>
<p>Set <code>$projDir</code> to the local file path where the project files are
located.</p>
</li>
<li>
<p>Set <code>$dbBaseName</code> to the name of the database with the "-0" suffix.</p>
</li>
<li>
<p>Set <code>$etsFile`to the file path of the `etf:ExecutableTestSuite</code>
document.</p>
<div class="exampleblock">
<div class="title">Example 5. XQuery declarations of standard variables</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre>declare variable $projDir external := "/home/user/Documents/ETF/ets-repository/generic";
declare variable $dbBaseName external := "errors";
declare variable $etsFile external := $projDir || file:dir-separator() || "ets-template-bsxets.xml";</pre>
</div>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Executing the XQuery should now execute the test suite.</p>
</div>
<div class="paragraph">
<p>There are additional steps, in case the testproject uses a prepare-chunk document (see <a href="#the-prepare-chunk-document">below</a> for more information):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the external variable <code>$dbName</code> to the name of your database in BaseX.</p>
</li>
<li>
<p>Open and run the prepare-chunk document.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Executing the XQuery document should now execute the test suite.</p>
</div>
</div>
<div class="sect3">
<h4 id="_best_practices">3.2.3. Best practices</h4>
<div class="paragraph">
<p>During the development of a test suite, it may be handy to compile a
special XQuery that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>loads a test file using the doc() function</p>
</li>
<li>
<p>includes the functions that will be called from expressions in
assertions</p>
</li>
<li>
<p>sets the relevant variables used in expressions in assertions</p>
</li>
<li>
<p>adds the expression of a single assertion that should be tested</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This approach may speed up testing during the development. For example,
loading a test document using the doc() function allows to make
immediate changes to a test file without reloading a database.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basics">3.3. Basics</h3>
<div class="paragraph">
<p>In ETF, sets of XML documents are tested using <a href="http://basex.org">BaseX</a>, an XML database.
An Executable Test Suite is essentially an <a href="http://www.w3.org/TR/xquery-31/">XQuery</a> that operates on the set of XML documents under test and returns an XML document with the root element <code>etf:TestTaskResult</code>.</p>
</div>
<div class="paragraph">
<p>The content model is specified using an <a href="http://resources.etf-validator.net/schema/v2/doc/service.html">XML schema</a>.</p>
</div>
<div class="paragraph">
<p>The current stable schema is available <a href="http://resources.etf-validator.net/schema/v2/service/service.xsd">here</a> and can be used for validating ETF XML structures:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;EtfModelItem xmlns=&quot;http://www.interactive-instruments.de/etf/2.0&quot;
 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.interactive-instruments.de/etf/2.0 http://resources.etf-validator.net/schema/v2/service/service.xsd&quot; ...&gt;
  ...
&lt;/EtfModelItem&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is a simple example with one test case result embedding two test assertions results:</p>
</div>
<div class="exampleblock">
<div class="title">Example 6. Simple example of the result of testing a BaseX-based Executable Test Suite</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;TestTaskResult xmlns=&quot;http://www.interactive-instruments.de/etf/2.0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.interactive-instruments.de/etf/2.0 http://resources.etf-validator.net/schema/v2/service/service.xsd&quot;
    id=&quot;EIDc5e50620-5107-4b75-b6c1-74d4465fba0f&quot;&gt;
    &lt;testObject ref=&quot;EID666f71c1-9af3-4040-a21d-190f953725f4&quot;/&gt;
    &lt;testModuleResults&gt;
        &lt;TestModuleResult id=&quot;EIDfdfc25d5-1790-43bd-abb6-2de6263619cc&quot;&gt;
            &lt;testCaseResults&gt;
                &lt;TestCaseResult id=&quot;EID3dab6279-f553-4f93-b1bc-b73329fc69c3&quot;&gt;
                    &lt;testStepResults&gt;
                        &lt;TestStepResult id=&quot;EIDffaf6f6a-66f6-4796-8c42-e5f681517c62&quot;&gt;
                            &lt;testAssertionResults&gt;
                                &lt;TestAssertionResult id=&quot;EIDa35d1dd3-7cc2-41c7-9b2b-f60df48ffabb&quot;&gt;
                                    &lt;parent ref=&quot;EIDffaf6f6a-66f6-4796-8c42-e5f681517c62&quot;/&gt;
                                    &lt;resultedFrom ref=&quot;EIDcab35f1a-6292-44b9-ae2c-9ec62fc0f4b6&quot;/&gt;
                                    &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
                                    &lt;duration&gt;0&lt;/duration&gt;
                                    &lt;status&gt;PASSED&lt;/status&gt;
                                &lt;/TestAssertionResult&gt;
                                &lt;TestAssertionResult id=&quot;EIDc18b01ff-f544-4d0e-9a8f-ef3874abd43f&quot;&gt;
                                    &lt;messages&gt;
                                        &lt;message ref=&quot;TR.filesWithErrors&quot;&gt;
                                            &lt;translationArguments&gt;
                                                &lt;argument token=&quot;count&quot;&gt;1&lt;/argument&gt;
                                            &lt;/translationArguments&gt;
                                        &lt;/message&gt;
                                        &lt;message ref=&quot;TR.incorrectRoot&quot;&gt;
                                            &lt;translationArguments&gt;
                                                &lt;argument token=&quot;filename&quot;&gt;ps-root.xml&lt;/argument&gt;
                                                &lt;argument token=&quot;elementName&quot;&gt;FeatureCollection&lt;/argument&gt;
                                                &lt;argument token=&quot;namespace&quot;&gt;http://www.opengis.net/wfs&lt;/argument&gt;
                                            &lt;/translationArguments&gt;
                                        &lt;/message&gt;
                                    &lt;/messages&gt;
                                    &lt;parent ref=&quot;EIDffaf6f6a-66f6-4796-8c42-e5f681517c62&quot;/&gt;
                                    &lt;resultedFrom ref=&quot;EID928d8204-3015-4811-82fd-f4779b35385b&quot;/&gt;
                                    &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
                                    &lt;duration&gt;1&lt;/duration&gt;
                                    &lt;status&gt;FAILED&lt;/status&gt;
                                &lt;/TestAssertionResult&gt;
                            &lt;/testAssertionResults&gt;
                            &lt;parent ref=&quot;EID3dab6279-f553-4f93-b1bc-b73329fc69c3&quot;/&gt;
                            &lt;resultedFrom ref=&quot;EIDc177cf64-3a66-4ac4-92b9-61207aab8007&quot;/&gt;
                            &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
                            &lt;duration&gt;1&lt;/duration&gt;
                            &lt;status&gt;FAILED&lt;/status&gt;
                        &lt;/TestStepResult&gt;
                    &lt;/testStepResults&gt;
                    &lt;parent ref=&quot;EIDfdfc25d5-1790-43bd-abb6-2de6263619cc&quot;/&gt;
                    &lt;resultedFrom ref=&quot;EIDf66872d4-3a1f-4581-a501-94200219bf13&quot;/&gt;
                    &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
                    &lt;duration&gt;1&lt;/duration&gt;
                    &lt;status&gt;FAILED&lt;/status&gt;
                &lt;/TestCaseResult&gt;
            &lt;/testCaseResults&gt;
            &lt;parent ref=&quot;EIDc5e50620-5107-4b75-b6c1-74d4465fba0f&quot;/&gt;
            &lt;resultedFrom ref=&quot;EID8e96257c-ae42-4123-b298-b8c5eda3a027&quot;/&gt;
            &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
            &lt;duration&gt;1&lt;/duration&gt;
            &lt;status&gt;FAILED&lt;/status&gt;
        &lt;/TestModuleResult&gt;
    &lt;/testModuleResults&gt;
    &lt;attachments&gt;
        &lt;Attachment id=&quot;EIDc5e50620-5111-4bc5-b6c1-74d4465fbb23&quot;&gt;
            &lt;label&gt;Log file&lt;/label&gt;
            &lt;encoding&gt;UTF-8&lt;/encoding&gt;
            &lt;mimeType&gt;text/plain&lt;/mimeType&gt;
            &lt;referencedData href=&quot;file://local/log.txt&quot;/&gt;
        &lt;/Attachment&gt;
    &lt;/attachments&gt;
    &lt;resultedFrom ref=&quot;EID545f9e49-009b-4114-9333-7ca26413b5d4&quot;/&gt;
    &lt;startTimestamp&gt;2016-09-05T13:10:24Z&lt;/startTimestamp&gt;
    &lt;duration&gt;1&lt;/duration&gt;
    &lt;status&gt;FAILED&lt;/status&gt;
&lt;/TestTaskResult&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The document is based on the nested structures of test modules, test
cases, test steps and test assertions. For each of these result items
some basic information is provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An identifier in an attribute <code>id</code>. The value must be a UUID with a
prefix "EID", e.g. "EIDc5e50620-5107-4b75-b6c1-74d4465fba0f".</p>
<div class="paragraph">
<p>In XQueries in BaseX, new UUID values can be created using
<code>uuid:randomUUID()</code> where the uuid namespace is declared using
<code>declare namespace uuid='java.util.UUID';</code>.</p>
</div>
</li>
<li>
<p>Each result item, except the top level test task result (representing
the result of executing the test suite) has a <code>etf:parent</code> child element
with a <code>ref</code> attribute. The value of the <code>ref</code> attribute is the <code>id</code> of
the ancestor result item.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this packaging of the result items the <code>ref</code> value is redundant
as it could be derived from the nested document structure, but it is
required so that the result items can also be stored separately without
losing the relationships between the result items.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>The status of the result item is given in a child element
<code>etf:status</code>. For every level except the lowest level (the test
assertions), the status must be derived automatically from the status
values of the next lower level where the following XQuery function could
be used (<code>$statusValues</code> is the sequence of status values from the lower
level result items):</p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XQUERY"><span></span>declare function local:status($statusValues as xs:string*) as xs:string
{
    if ($statusValues =&#39;FAILED&#39;) then &#39;FAILED&#39;
    else if ($statusValues =&#39;SKIPPED&#39;) then &#39;SKIPPED&#39;
    else if ($statusValues =&#39;WARNING&#39;) then &#39;WARNING&#39;
    else if ($statusValues =&#39;INFO&#39;) then &#39;INFO&#39;
    else if ($statusValues =&#39;PASSED_MANUAL&#39;) then &#39;PASSED_MANUAL&#39;
    else if ($statusValues =&#39;PASSED&#39;) then &#39;PASSED&#39;
    else if ($statusValues =&#39;NOT_APPLICABLE&#39;) then &#39;NOT_APPLICABLE&#39;
    else &#39;UNDEFINED&#39;
};</code></pre>
</div>
</div>
</li>
<li>
<p>A time stamp when the execution of the test item was started in child
element <code>etf:startTimestamp</code>. The value is expected to include seconds
and be in the UTC timezone.</p>
</li>
<li>
<p>The duration of the execution in milliseconds (an integer) in child
element <code>etf:duration</code>.</p>
</li>
<li>
<p>A reference to the corresponding test item for which this is a result
is included in attribute <code>ref</code> in child element <code>etf:resultedFrom</code>.
Again, <code>ref</code> is the id of that test item. An <code>etf:TestAssertionResult</code>
will always reference an <code>etf: TestAssertion</code>, and so on. The test items
and their XML representation are discussed below.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>etf:TestTaskResult</code> may have additional child elements (more
information is provided in separate pages documenting more advanced
features), but it must have a child element <code>etf:testObject</code> that
references the <code>etf:TestObject</code> that represents the XML documents under
test. As this identifier is assigned by ETF, it is passed to the XQuery
as an external variable <code>$testObjectId</code>.</p>
</div>
<div class="paragraph">
<p>Test assertions may include messages. This is at least the case for
failed assertions or assertions with warnings or other information.
These are provided embedded in a child element <code>etf:messages</code> where each
message has the following structure (to support translation of messages
into different languages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>ref</code> attribute that includes the name of a message template. All
template names start with "TR.". Message templates and their XML
representation are discussed below. They are basically a set of text
strings (one for each supported language) which include placeholders.</p>
</li>
<li>
<p>For each of the placeholders an <code>etf:argument</code> element is provided
inside of an <code>etf:translationArgument</code> element. The <code>token</code> attribute is
the name of the placeholder and the text node is the value the
placeholder should be replace with in the message.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="typical-setup">3.4. Typical setup</h3>
<div class="paragraph">
<p>The BaseX test driver in ETF expects that each Executable Test Suite is
specified using an XML document described in the next section. The
document includes a file reference to the XQuery to be executed. The
BaseX test driver of ETF will execute this XQuery and pass the file
reference to the Executable Test Suite document in an external variable
<code>$etsFile</code>.</p>
</div>
<div class="paragraph">
<p>The XQuery will process the Executable Test Suite document and execute
each test assertion and return the XML document with the root element
<code>etf:TestTaskResult</code> as described above.</p>
</div>
<div class="paragraph">
<p>The details are discussed in the following sections.</p>
</div>
</div>
<div class="sect2">
<h3 id="xml-document-of-an-executable-test-suite">3.5. XML document of an Executable Test Suite</h3>
<div class="paragraph">
<p>A document specifying an Executable Test Suite is an XML document with
the root element <code>etf:ExecutableTestSuite</code>. The content model is
specified using an
<a href="https://github.com/interactive-instruments/etf-bsxds/blob/master/src/main/resources/schema/model/test.xsd">XML
schema</a>.</p>
</div>
<div class="paragraph">
<p>In order to enable that ETF can identify all Executable Test Suite
documents (and monitor them for changes) without analysing the file
content, the file names have to use a suffix "-bsxets.xml".</p>
</div>
<div class="paragraph">
<p>Here is a simple example:</p>
</div>
<div class="exampleblock">
<div class="title">Example 7. A simple BaseX-based Executable Test Suite</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;ExecutableTestSuite xmlns=&quot;http://www.interactive-instruments.de/etf/2.0&quot;     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.interactive-instruments.de/etf/2.0 https://resources.etf-validator.net/schema/v2/val/ignoreRef.xsd&quot; id=&quot;EID545f9e49-009b-4114-9333-7ca26413b5d4&quot;&gt;
    &lt;itemHash&gt;bQ==&lt;/itemHash&gt;
    &lt;remoteResource&gt;http://github.com/inspire-eu-validation/ets-repository/data-encoding/inspire-gml&lt;/remoteResource&gt;
    &lt;localPath&gt;/auto&lt;/localPath&gt;
    &lt;label&gt;Conformance class: INSPIRE GML encoding&lt;/label&gt;
    &lt;description&gt;&lt;![CDATA[This test suite examines GML documents against basic requirements for the GML encoding for spatial data sets in INSPIRE. This only covers application-schema-independent, generic requirements. Requirements related to specific application schemas are part of conformance classes with a dependency on this conformance class.&lt;br/&gt;&lt;br/&gt;
&lt;b&gt;This is a draft version. It has limitations and is expected to contain errors.&lt;/b&gt; Please report any issues or problems &lt;a href=&quot;https://github.com/interactive-instruments/ets-repository/issues&quot; target=&quot;_blank&quot;&gt;in GitHub&lt;/a&gt;.&lt;br/&gt;&lt;br/&gt;
Known limitations are documented in the description of the applicable test case or test assertion.&lt;br/&gt;&lt;br/&gt;
Source: &lt;a href=&quot;http://inspire.ec.europa.eu/id/ats/data-encoding/3.3/inspire-gml&quot; target=&quot;_blank&quot;&gt;Conformance Class &#39;INSPIRE GML encoding&#39;&lt;/a&gt;&lt;br/&gt;&lt;br/&gt;
Pre-requisite conformance classes:
&lt;ul&gt;&lt;li&gt;Conformance Class &#39;GML 3.2 documents [OGC]&#39;&lt;/li&gt;&lt;/ul&gt;]]&gt;&lt;/description&gt;
    &lt;reference&gt;../../inspire-bsxets.xq&lt;/reference&gt;
    &lt;version&gt;0.1.0&lt;/version&gt;
    &lt;author&gt;interactive instruments GmbH&lt;/author&gt;
    &lt;creationDate&gt;2016-08-15T00:00:00Z&lt;/creationDate&gt;
    &lt;lastEditor&gt;interactive instruments GmbH&lt;/lastEditor&gt;
    &lt;lastUpdateDate&gt;2016-08-15T00:00:00Z&lt;/lastUpdateDate&gt;
    &lt;testDriver ref=&quot;EID4dddc9e2-1b21-40b7-af70-6a2d156ad130&quot;/&gt;
    &lt;translationTemplateBundle ref=&quot;EID70a263c0-0ad7-42f2-9d4d-0d8a4ca71b52&quot;/&gt;
    &lt;supportedTestObjectTypes&gt;
        &lt;testObjectType ref=&quot;EIDe1d4a306-7a78-4a3b-ae2d-cf5f0810853e&quot;/&gt;
    &lt;/supportedTestObjectTypes&gt;
    &lt;testModules&gt;
        &lt;TestModule id=&quot;EID8e96257c-ae42-4123-b298-b8c5eda3a027&quot;&gt;
            &lt;label&gt;IGNORE&lt;/label&gt;
            &lt;description&gt;IGNORE&lt;/description&gt;
            &lt;parent ref=&quot;EID545f9e49-009b-4114-9333-7ca26413b5d4&quot;/&gt;
            &lt;testCases&gt;
                &lt;TestCase id=&quot;EIDf66872d4-3a1f-4581-a501-94200219bf13&quot;&gt;
                    &lt;label&gt;Basic tests&lt;/label&gt;
                    &lt;description&gt;Verify that all documents contain GML features and use the expected character encoding.&lt;/description&gt;
                    &lt;parent ref=&quot;EID8e96257c-ae42-4123-b298-b8c5eda3a027&quot;/&gt;
                    &lt;testSteps&gt;
                        &lt;TestStep id=&quot;EIDc177cf64-3a66-4ac4-92b9-61207aab8007&quot;&gt;
                            &lt;label&gt;IGNORE&lt;/label&gt;
                            &lt;description&gt;IGNORE&lt;/description&gt;
                            &lt;parent ref=&quot;EIDf66872d4-3a1f-4581-a501-94200219bf13&quot;/&gt;
                            &lt;statementForExecution&gt;not applicable&lt;/statementForExecution&gt;
                            &lt;testItemType ref=&quot;EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0&quot;/&gt;
                            &lt;testAssertions&gt;
                                &lt;TestAssertion id=&quot;EIDcab35f1a-6292-44b9-ae2c-9ec62fc0f4b6&quot;&gt;
                                    &lt;label&gt;gml.a.1: Errors loading the XML documents&lt;/label&gt;
                                    &lt;description&gt;&lt;![CDATA[Report errors that occurred during loading the documents in the test object. A typical example is an XML document that is not well-formed and therefore cannot be processed.]]&gt;&lt;/description&gt;
                                    &lt;parent ref=&quot;EIDc177cf64-3a66-4ac4-92b9-61207aab8007&quot;/&gt;
                                    &lt;expectedResult&gt;NOT_APPLICABLE&lt;/expectedResult&gt;
                                    &lt;expression&gt;if (not($validationErrors)) then &#39;PASSED&#39; else (&#39;FAILED&#39;, for $error in $validationErrors return (local:addMessage(&#39;TR.valdiationError&#39;, map { &#39;text&#39;: $error })))&lt;/expression&gt;
                                    &lt;testItemType ref=&quot;EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a&quot;/&gt;
                                    &lt;translationTemplates&gt;
                                        &lt;translationTemplate ref=&quot;TR.valdiationError&quot;/&gt;
                                    &lt;/translationTemplates&gt;
                                &lt;/TestAssertion&gt;
                                &lt;TestAssertion id=&quot;EID928d8204-3015-4811-82fd-f4779b35385b&quot;&gt;
                                    &lt;label&gt;gml.a.2: Document root element&lt;/label&gt;
                                    &lt;description&gt;&lt;![CDATA[Check for each XML document that the root element is a GML feature or a GML feature collection.&lt;br/&gt;&lt;br/&gt;
For feature collections the following root elements are recognised:
&lt;ul&gt;
&lt;li&gt;wfs:FeatureCollection (WFS 2.0),&lt;/li&gt;
&lt;li&gt;gml:FeatureCollection (GML 3.2),&lt;/li&gt;
&lt;li&gt;base:SpatialDataSet (INSPIRE Base 3.2 or 3.3).&lt;/li&gt;
&lt;/ul&gt;
This test is a pre-condition to identify the INSPIRE features in the test object.&lt;br/&gt;&lt;br/&gt;
Relevant requirements and recommendations:
&lt;ul&gt;&lt;li&gt;Recommendation 11 - For the exchange of spatial objects in GML, an XML document with a FeatureCollection root element from ISO 19142:2010 (WFS 2.0) should be used.&lt;/li&gt;&lt;/ul&gt;
&lt;b&gt;Known limitations:&lt;/b&gt;
&lt;ul&gt;
&lt;li&gt;Currently only feature collections are recognized as the test engine BaseX is not schema-aware. A new extension function is required to identify all feature elements.&lt;/li&gt;
&lt;/ul&gt;
Source: &lt;a href=&quot;&quot; target=&quot;_blank&quot;&gt;Abstract Test Case &#39;Basic test&#39;&lt;/a&gt;]]&gt;&lt;/description&gt;
                                    &lt;parent ref=&quot;EIDc177cf64-3a66-4ac4-92b9-61207aab8007&quot;/&gt;
                                    &lt;expectedResult&gt;NOT_APPLICABLE&lt;/expectedResult&gt;
                                    &lt;expression&gt;
let $filesWithErrors := $db[not(wfs:FeatureCollection or gml:FeatureCollection or base32:SpatialDataSet or base:SpatialDataSet or gml:AbstractFeature)][position() le $limitErrors]
return
(if ($filesWithErrors) then &#39;FAILED&#39; else &#39;PASSED&#39;,
 local:error-statistics(&#39;TR.filesWithErrors&#39;, count($filesWithErrors)),
 for $file in $filesWithErrors
    order by local:filename($file)
    let $root := $file/element()
    return
    local:addMessage(&#39;TR.incorrectRoot&#39;, map { &#39;filename&#39;: local:filename($root), &#39;elementName&#39;: local-name($root), &#39;namespace&#39;: namespace-uri($root) }))
                                    &lt;/expression&gt;
                                    &lt;testItemType ref=&quot;EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a&quot;/&gt;
                                    &lt;translationTemplates&gt;
                                        &lt;translationTemplate ref=&quot;TR.incorrectRoot&quot;/&gt;
                                        &lt;translationTemplate ref=&quot;TR.filesWithErrors&quot;/&gt;
                                    &lt;/translationTemplates&gt;
                                &lt;/TestAssertion&gt;
                            &lt;/testAssertions&gt;
                        &lt;/TestStep&gt;
                    &lt;/testSteps&gt;
                &lt;/TestCase&gt;
            &lt;/testCases&gt;
        &lt;/TestModule&gt;
    &lt;/testModules&gt;
&lt;/ExecutableTestSuite&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s go through the document in the example in detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>All items that are stored by ETF and may be referenced include an
attribute <code>id</code> where the value must be a UUID with a prefix "EID". There
are many ways to generate a pool of UUIDs when drafting an Executable
Test Suite, including web sites like <a href="https://www.uuidgenerator.net/" class="bare">https://www.uuidgenerator.net/</a>.<br></p>
</li>
<li>
<p>All items include the properties <code>etf:label</code> and <code>etf:description</code>. It
is essential to provide these elements in order to generate test reports
that are useful and understandable. The description may include HTML
markup that will be used when generating test reports in HTML; the
markup must encoded or embedded in a CDATA section.</p>
</li>
<li>
<p>All items, except the top level test suite, has a <code>etf:parent</code> child
element with a <code>ref</code> attribute. The value of the <code>ref</code> attribute is the
<code>id</code> of the ancestor item. Like in the case of the test result in the
section "Introduction", the <code>ref</code> value is redundant as it could be
derived from the nested document structure, but it is required so that
the items can also be handled separately within ETF without losing the
relationships between the items.</p>
</li>
<li>
<p>The elements <code>etf:itemHash</code> and <code>etf:localPath</code> are used by ETF
internally. Use "bQ==" and "/auto" as initial values respectively.</p>
</li>
<li>
<p>The element <code>etf:remoteResource</code> may be included to provide a link to
a webpage where additional information about the test suite can be
found.</p>
</li>
<li>
<p>The element <code>etf:reference</code> is a local file reference to
<a href="#the-xquery-document">the XQuery</a> to be executed by the ETF test
driver for BaseX.</p>
</li>
<li>
<p>The elements <code>etf:version</code>, <code>etf:author</code>, <code>etf:creationDate</code>,
<code>etf:lastEditor</code> and <code>etf:lastUpdateDate</code> are used to provide metadata
about this version of the Executable Test Suite. The 'date' values are
expected to include time and be in the UTC timezone.</p>
</li>
<li>
<p>The element <code>etf:testDriver</code> references the test driver for BaseX. The
current test driver has a fixed identifier
"EID4dddc9e2-1b21-40b7-af70-6a2d156ad130".</p>
</li>
<li>
<p>The element <code>etf:translationTemplateBundle</code> references an
<code>etf:TranslationTemplateBundle</code> object containing all linguistic text in
one or more languages used in an Executable Test Suite. The structure of
the document is described below. Multiple Executable Test Suites may
share a single bundle. A bundle is typically managed as a separate XML
document located the sub directory <code>include-metadata</code>.</p>
</li>
<li>
<p>The element <code>etf:supportedTestObjectTypes</code> includes references to the
<code>etf:TestObjectType`s that this Executable Test Suite supports, i.e. the
Executable Test Suite can be executed on test objects that are of one
the referenced types. For each supported `etf:TestObjectType</code> an element
<code>etf:testObjectType</code> is created.</p>
</li>
<li>
<p>Test modules, test cases, test steps and test assertions are described
in the document where the nesting represents the structure of the test
items. The example above has a single test module with a single test
case with a single test step and two test assertions.</p>
</li>
<li>
<p>For BaseX tests the concept of test steps is usually not applicable
and there will be exactly one test step for each test case. If label and
description of the test step are set to the values "IGNORE" the
superfluous test step will not be shown in test reports.</p>
</li>
<li>
<p>Often the additional structure level of test modules is not needed or
used, i.e. there will be exactly one test module in the test suite.
Again, if label and description of the test module are set to the values
"IGNORE" the superfluous test module will not be shown in test reports.</p>
</li>
<li>
<p>The elements <code>etf:statementForExecution</code> and <code>etf:testItemType</code> in
test steps are not relevant for tests using BaseX, but must be provided.
<code>etf:statementForExecution</code> must be a value that is not empty; a typical
approach is to use "not applicable" as the value. For
<code>etf:testItemType</code>, reference "EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0",
which is a pre-defined <code>etf:TestItemType</code> for superfluous test steps in
BaseX.</p>
</li>
<li>
<p>For test assertions the elements discussed in the next bullet items
need to be provided.</p>
</li>
<li>
<p>The element <code>etf:expectedResult</code> is not relevant for tests using
BaseX, but must be provided. Use "NOT_APPLICABLE" as the value.</p>
</li>
<li>
<p>The element <code>etf:testItemType</code> identifies the type of the test
assertion. Three values are pre-defined for BaseX tests:</p>
</li>
<li>
<p>"EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a" for assertions where the
element <code>etf:expression</code> contains an XQuery fragment that has to be
executed to determine the result.</p>
</li>
<li>
<p>"EIDb48eeaa3-6a74-414a-879c-1dc708017e11" for assertions where the
element <code>etf:expression</code> can be ignored and the result status will
always be 'PASSED_MANUAL' indicating that the assertion needs to be
checked manually by an expert.</p>
</li>
<li>
<p>"EID92f22a19-2ec2-43f0-8971-c2da3eaafcd2" for assertions that are
disabled, e.g. during the drafting phase or due to known issues that
have to be fixed.</p>
</li>
<li>
<p>In case of an assertion of type
"EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a", the element <code>etf:expression</code>
contains an XQuery fragment that will be executed to determine the
result and any messages for the user. The rules for these expressions
are discussed in the next section about the XQuery document.</p>
</li>
<li>
<p>The element <code>etf:translationTemplates</code> lists all message templates
that may be created by the test assertion as part of the execution of
the XQuery fragment.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="the-xquery-document">3.6. The XQuery document</h3>
<div class="paragraph">
<p>As explained in the sections above, the XQuery has to process the
<code>etf:ExecutableTestSuite</code> document, execute queries based on the
expressions for each XQuery assertion and return a <code>etf:TestTaskResult</code>
document capturing the result of the test execution.</p>
</div>
<div class="paragraph">
<p>The ETF test driver for BaseX passes the following external variables to
the XQuery, which must be declared in the XQuery and which are necessary
to enable the execution of the test suite:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$testObjectId</code> is the id of the test object on which the test suite
is to be executed. This information is required to construct the
<code>etf:TestTaskResult</code> document.</p>
</li>
<li>
<p><code>$testTaskResultId</code> is the id of the result, i.e. the
<code>etf:TestTaskResult</code> element.</p>
</li>
<li>
<p><code>etf:$projDir</code> is the local path to the project directory that is
monitored by ETF and which contains all necessary files including the
<code>etf:ExecutableTestSuite</code> document, the XQuery document, the
<code>etf:TranslationTemplateBundle</code> document, etc.</p>
</li>
<li>
<p><code>etf:$tmpDir</code> is the local path to a directory where additional files
may be written during execution. This is discussed in the section on
attachements below.</p>
</li>
<li>
<p>ETF loads all XML documents under test into one or more BaseX
databases. Typically it will be one database, but for very large sets of
XML documents the documents will distributed into several databases due
to limitations in the number of XML nodes per database. In this case,
the name of the databases will follow the pattern
<code>concat($dbBaseName,'-',$i)</code> where <code>$i</code> is an integer between <code>0</code> and
<code>$dbCount-1</code>.</p>
</li>
<li>
<p><code>$etsFile</code> is the local path to the XML document of the Executable
Test Suite to be executed.</p>
</li>
<li>
<p><code>$validationErrors</code> is a string with any errors that occured during
loading the XML documents under test into BaseX. Only documents with
file extensions "xml" and "gml" are processed. Files that are not
well-formed XML documents are excluded. If schema validation against a
pre-defined schema is activated, only valid schemas are loaded. Any
errors detected in the files by the XML parser are reported in this
variable. This information may be used in a test assertion.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>How the XQuery processes the <code>etf:ExecutableTestSuite</code> document,
executes queries for each XQuery assertion and generates the
<code>etf:TestTaskResult</code> document is up to the developer of the Executable
Test Suite, but the standard approach is the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The values of the variables are checked. In case of an error an
exception is raised.</p>
</li>
<li>
<p>The database(s) are opened.</p>
</li>
<li>
<p>The items to inspect, e.g. the elements representing GML features, are
identified.</p>
</li>
<li>
<p>The Executable Test Suite document <code>$etsFile</code> is loaded.</p>
</li>
<li>
<p>A single XQuery that will execute the complete test suite using the
eval() function of XQuery is compiled. This approach is necessary as the
XQuery fragments in the <code>etf:expression</code> elements in the test assertions
need to be executed. This single XQuery consists of a fixed prolog
consisting of</p>
</li>
<li>
<p>namespace / module / variable declarations and functions used in
<code>etf:expression</code> elements (this typically is read from a separate file),</p>
</li>
<li>
<p>additional preparatory statements and</p>
</li>
<li>
<p>the <code>etf:TestTaskResult</code> XML structure based on the test modules, test
cases, test step and test assertions in the Executable Test Suite
document.</p>
</li>
<li>
<p>Try/catch blocks are used frequently to contain error situations as
good as possible, including errors in the XQuery fragments in
<code>etf:expression</code> elements.</p>
</li>
<li>
<p>This XQuery is executed using eval() and the result is returned to the
ETF test driver.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
A generic template for reuse is available in the
<a href="https://github.com/interactive-instruments/etf-ets-repository/tree/master/generic">directory
'generic'</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This generic template is designed for testing features
(however, the basic structure is the same, if metadata records or other
XML elements are subject to the tests). The generic template consists of</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/ets-generic-bsxets.xq">generic
XQuery</a>,</p>
</li>
<li>
<p>a
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/generic-query-prolog.xq">generic
XQuery prolog</a> for the dynamic XQuery that is compiled by
ets-generic-bsxets.xq,</p>
</li>
<li>
<p>additional preparatory statements that add a statistics table with the
number of features per feature type is adds features with geometries to
a spatial index to support spatial queries in assertions using the
<a href="https://github.com/interactive-instruments/etf-gmlgeox">GmlGeoX module</a>),</p>
</li>
<li>
<p>a
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/include-metadata/generic-ettb.xml">starting
point for a translation template bundle</a> and</p>
</li>
<li>
<p>a
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/generic/include-metadata/generic-esrtt.xml">statistical
table template</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this generic XQuery, the following variables are passed to the
dynamic XQuery, i.e. these variables are available in the
<code>etf:expression</code> fragments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$db</code>: the sequence of XML document nodes of the XML documents under
test</p>
</li>
<li>
<p><code>$features</code>: the sequence of GML feature elements in the XML documents
under test</p>
</li>
<li>
<p><code>$idMap</code>: a map of the gml:id values of the features</p>
</li>
<li>
<p><code>$testObjectId</code>: the id of the test object in ETF</p>
</li>
<li>
<p><code>$logFile</code>: the name of the log file in the tmp directory</p>
</li>
<li>
<p><code>$statFile</code>: the name of the file with the statistical table in the
tmp directory</p>
</li>
<li>
<p><code>$limitErrors</code>: to avoid memory and runtime issues in cases with
millions of errors it is recommended to limit the number of errors that
is processed for each assertion; by default '1000' is used</p>
</li>
<li>
<p><code>$validationErrors</code>: the list of errors that occured when loading the
XML documents under test into the BaseX databases</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Currently the XQuery fragment in an <code>etf:expression</code> in each assertion
has to return a sequence of items, where the first item is a string with
the status, e.g. 'PASSED' or 'FAILED'. Any additional items must be
<code>etf:message</code> elements.</p>
</div>
<div class="exampleblock">
<div class="title">Example 8. XQueries used in the INSPIRE validator</div>
<div class="content">
<div class="paragraph">
<p>In the INSPIRE case, there are three different XQuery options that are
used. In Exectuable Test Suites that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>&#8230;&#8203; test features (elements
substitutable for gml:AbstractFeature) and which include tests calling
functions of the GmlGeoX library,
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/inspire-bsxets.xq">inspire-bsxets.xq</a> is used;</p>
</li>
<li>
<p>&#8230;&#8203; test features (elements substitutable for gml:AbstractFeature),
but without using the GmlGeoX library,
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/inspire-noggeo-bsxets.xq">inspire-noggeo-bsxets.xq</a> is used;</p>
</li>
<li>
<p>&#8230;&#8203; test metadata records (gmd:MD_Metadata),
<a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/inspire-md-bsxets.xq">inspire-md-bsxets.xq</a> is used.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The current mechanism will in the future be replaced by a new BaseX
module implementing a listener similar to the following XQuery functions
currently defined in generic-query-prolog.xq:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>start($id as xs:string) as empty-sequence()</code></p>
</li>
<li>
<p><code>end($id as xs:string, $status as xs:string) as empty-sequence()</code></p>
</li>
<li>
<p>`addMessage($templateId as xs:string, $map as map(*)) as element()</p>
</li>
<li>
<p><code>log($text as xs:string) as empty-sequence()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once the listener is implemented, the whole generation of the
<code>etf:TestTaskResult</code> document will be done by the ETF test driver.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="the-prepare-chunk-document">3.7. The prepare-chunk document</h3>
<div class="paragraph">
<p>A prepare-chunk.xq document is optional but can be used to preprocess testdata.</p>
</div>
<div class="paragraph">
<p>Example usage: Prepare a spatial index and extract all objects with erroneous geometry before executing the tests.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="ulist">
<ul>
<li>
<p>For every given chunk, prepare-chunk.xq will be executed.</p>
</li>
<li>
<p>The name of the chunk is passed to the document through the variable <code>$dbName</code>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spatial-tests">3.8. Testing spatial aspects</h3>
<div class="sect3">
<h4 id="_overview_2">3.8.1. Overview</h4>
<div class="paragraph">
<p>The GmlGeoX extension module extends XQuery with additional capabilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Spatial indexing of features</p>
</li>
<li>
<p>Caching of feature geometries</p>
</li>
<li>
<p>Validation of feature geometries</p>
</li>
<li>
<p>Evaluation of topological predicates</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The complete documentation of the module is available in the <a href="http://interactive-instruments.github.io/etf-gmlgeox/javadoc/index.html?de/interactive_instruments/etf/bsxm/GmlGeoX.html">JavaDoc description</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_spatial_indexing">3.8.2. Spatial indexing</h4>
<div class="paragraph">
<p>Feature geometries can be indexed using an r*-tree. To index a feature execute <code>ggeo:index( Node featureNode, String id, Node xmlGeometry )</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>'featureNode' is the XML node with the feature to index.</p>
</li>
<li>
<p>'id' is a String id used for the geometry cache. Typically the gml:id of the feature is used.</p>
</li>
<li>
<p>'xmlGeometry' is the XML node with the GML geometry element to index.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is essential that the XML database is not updated after this function is used
otherwise the database index structures will change and the internal cache
references will become obsolete.</p>
</div>
<div class="exampleblock">
<div class="title">Example 9. Indexing a list of features</div>
<div class="content">
<div class="paragraph">
<p>To index a node list of features (<code>$features</code>) simply execute (where <code>ns:geometry</code> is the primary geometry property):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XQuery"><span></span>let $dummy := for $feature in $features
	return ggeo:index(db:node-pre($feature),db:name($feature),$feature/@gml:id,$feature/ns:geometry/*[1])</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once the index has been established, it can be searched to find all features whose bounding box overlaps with another bounding box. The <code>ggeo:search( number minx, number miny, number maxx, number maxy )</code> function returns a node list of indexed features overlapping with the search bounding box:</p>
</div>
<div class="exampleblock">
<div class="title">Example 10. Search all indexed features in a bounding box</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XQuery"><span></span>let $env := ggeo:envelope($candidate_geometry)
let $overlapping_features := ggeo:search($env[1],$env[2],$env[3],$env[4])</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 11. Select the candidate geometries that may intersect the search bounding box</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XQuery"><span></span>let $geometries :=
	for $feature in ggeo:search($env[1],$env[2],$env[3],$env[4])
		return ggeo:getGeometry($feature/@gml:id,$feature/ns:geometry/*[1])</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_caching">3.8.3. Geometry caching</h4>
<div class="paragraph">
<p>The parsed geometries are cached during indexing to avoid multiple computations of the geometries from the XML. The cache size can be set before the indexing is started using <code>ggeo:cacheSize( int size )</code>, the default size is 100000 geometries. The cache is transparent to the user of the GmlGeoX module.</p>
</div>
<div class="paragraph">
<p>Geometries are accessed from the index using <code>geo:getGeometry( String id, Node xmlGeometry )</code>. The <code>id</code> is specified during the indexing, typically the gml:id attribute of the GML feature is used. If the geometry with the id is currently in the cache, it is returned. Otherwise the geometry is computed from the XML and put into the cache.</p>
</div>
</div>
<div class="sect3">
<h4 id="_geometry_validation">3.8.4. Geometry Validation</h4>
<div class="paragraph">
<p>Validation of GML geometry elements within a given XML node is basically a SAX-based scan for recognized GML geometry elements, and subsequent validation of these elements. The default set of recognized element names is a subset of GML. Functions offered by the module can be used to modify this set within an XQuery. See the <a href="https://github.com/interactive-instruments/etf-webapp/wiki/dev_manual_modules_gmlgeox">test project developer documentation for this module</a> for further details.</p>
</div>
<div class="exampleblock">
<div class="title">Example 12. Validation of feature geometries</div>
<div class="content">
<div class="paragraph">
<p>In this XQuery expression, the feature geometries are all validated (test mask '110' means general validation and polygon patch connectivity are evaluated) and error messages returned from the GmlGeoX module are included in the test result.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XQuery"><span></span>let $messages := for $feature in $features
  return
	try {
		let $vr := ggeo:validateAndReport($feature,&#39;110&#39;)
		return
	   if (xs:boolean($vr/ggeo:isValid)) then ()
	   else
	   	for $message in $vr/ggeo:message[@type=&#39;ERROR&#39;]
			return
				local:addMessage(&#39;TR.invalidGeometry&#39;, map { &#39;filename&#39;: local:filename($feature), &#39;featureType&#39;: local-name($feature), &#39;gmlid&#39;: string($feature/@gml:id), &#39;text&#39;: $message/text() })
	} catch * {
		return () (: do not raise an error for parsing exceptions, if these are tested already elsewhere :)
	}
return
(if ($messages) then &#39;FAILED&#39; else &#39;PASSED&#39;,
 local:error-statistics(&#39;TR.featuresWithErrors&#39;, count(fn:distinct-values($messages//etf:argument[@token=&#39;gmlid&#39;]/text()))),
 $messages)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_evaluation_of_topological_predicates">3.8.5. Evaluation of topological predicates</h4>
<div class="paragraph">
<p>Topological predicates between two geometries are evaluated using the JTS library. The standard predicates specified in the OGC Simple Feature standard are supported. See the <a href="https://github.com/interactive-instruments/etf-webapp/wiki/dev_manual_modules_gmlgeox">test project developer documentation for this module</a> for further details.</p>
</div>
<div class="exampleblock">
<div class="title">Example 13. Testing</div>
<div class="content">
<div class="paragraph">
<p>In this XQuery expression, the feature geometries are all evaluated to determine overlaps. This assumes that all features have surface geometries.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XQuery"><span></span>let $messages :=
(for $candidate in $features
 return
 try {
  let $candidate_geometry := ggeo:getGeometry($candidate/@gml:id,$candidate/*:geometry/*[1])
  let $env := ggeo:envelope($candidate_geometry)
  let $other_features := ggeo:search($env[1],$env[2],$env[3],$env[4])
  for $feature in $other_features[not (@gml:id = $candidate/@gml:id)]
   order by $candidate/@gml:id, $feature/@gml:id
   return
   try {
   let $other_geometry := ggeo:getGeometry($feature/@gml:id,$feature/*:geometry/*[1])
   let $check := ggeo:relate($candidate_geometry, $other_geometry, &#39;F********&#39;)
	return
	if ($check) then ()
	else
	let $intersection := string(ggeo:intersection($candidate_geometry, $other_geometry))
	let $polygons := functx:get-matches($intersection,&#39;POLYGON\s?\(\s?\([\d,\.\s]+\)\s?\)&#39;)[fn:string-length(.)&gt;0]
	return local:addMessage(&#39;TR.Overlap&#39;, map { &#39;filename&#39;: local:filename($candidate), &#39;featureType&#39; : local-name($candidate), &#39;gmlid&#39;: string($candidate/@gml:id), &#39;gmlid2&#39;: string($feature/@gml:id), &#39;sharedArea&#39;: fn:string-join($polygons, &#39;, &#39;) })
	} catch * {
    return () (: do not raise an error for parsing exceptions, if these are tested already elsewhere :)
	}
 } catch * {
   return () (: do not raise an error for parsing exceptions, if these are tested already elsewhere :)
 }
)[position() le $limitErrors]
return
(if ($messages) then &#39;FAILED&#39; else &#39;PASSED&#39;,
 local:error-statistics(&#39;TR.featuresWithErrors&#39;, count(fn:distinct-values($messages//etf:argument[@token=&#39;gmlid&#39;]/text()))),
 $messages)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_known_limitations">3.8.6. Known limitations</h4>
<div class="paragraph">
<p>The implementation of the GmlGeoX module depends to a large extent on the deegree framework. The default geometry implementation of deegree does not support parsing all GML types, primarily the GML 3.3 types. Also, in a number of cases spatial operations are not supported for parsed geometries. This is primarily due to the fact that deegree relies on JTS to perform these operations, and that therefore the geometries must be simplified/linearized - which is not implemented for all geometry types that can be parsed by deegree. There is even a case where an incomplete JTS representations of a deegree geometry is accepted and used for spatial operations (for a surface with multiple polygon patches only the first is used).</p>
</div>
<div class="paragraph">
<p>As a result, a test developer of this module must be very careful regarding which geometry types are supported for processing, and whether the computation is robust and exact or not. Please consult the <a href="http://interactive-instruments.github.io/etf-gmlgeox/javadoc/index.html?de/interactive_instruments/etf/bsxm/GmlGeoX.html">JavaDoc</a> for additional details.</p>
</div>
<div class="paragraph">
<p>For the spatial relationship operators, <a href="https://github.com/interactive-instruments/etf-webapp/wiki/gmlgeox-module-geometry-types-supported-by-spatial-operators">this page</a> in the test project developer manual documents which geometry types are supported and which are not. The page also has information, which geometry types are simplified/linearized automatically by the module.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="parameters">3.9. Parameters</h3>
<div class="paragraph">
<p>Parameters for each Exectuable Test Suite may be declared as part of the
<code>etf:ExecutableTestSuite</code> document. The ETF web application will include
these parameters in the dialog when a test run is started.</p>
</div>
<div class="paragraph">
<p>The typical parameters for tests on sets of XML documents are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>files_to_test</code>: A regular expression. All files in the test object
where the file name matches the regular expression will be check in the
test, all other will be excluded. The default value '.*' matches all
files.</p>
</li>
<li>
<p><code>tests_to_execute</code>: A regular expression. All test assertions in the
executable test suite where the label matches the regular expression
will be used in the test run, all other will be skipped. The default
value '.*' matches all test assertions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is the XML snippet for these parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>    &lt;ParameterList name=&quot;ETF Standard Parameters for XML test objects&quot;&gt;
        &lt;parameter name=&quot;files_to_test&quot; required=&quot;true&quot;&gt;
            &lt;defaultValue&gt;.*&lt;/defaultValue&gt;
            &lt;description ref=&quot;TR.filesToTest&quot;/&gt;
            &lt;allowedValues&gt;.*&lt;/allowedValues&gt;
            &lt;type&gt;string&lt;/type&gt;
        &lt;/parameter&gt;
        &lt;parameter name=&quot;tests_to_execute&quot; required=&quot;false&quot;&gt;
            &lt;defaultValue&gt;.*&lt;/defaultValue&gt;
            &lt;description ref=&quot;TR.testsToExecute&quot;/&gt;
            &lt;allowedValues&gt;.*&lt;/allowedValues&gt;
            &lt;type&gt;string&lt;/type&gt;
        &lt;/parameter&gt;
    &lt;/ParameterList&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="basex-test-object-types">3.10. Test Object Types</h3>
<div class="sect3">
<h4 id="_overview_3">3.10.1. Overview</h4>
<div class="paragraph">
<p>This section lists all <a href="#test-object-types">Test Object Types</a> that are pre-defined in the BaseX test driver.</p>
</div>
<div class="paragraph">
<p>For each Test Object Type, the following information is provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a description</p>
</li>
<li>
<p>the ID that must be used to reference the Test Object Type from an Executable Test Suite</p>
</li>
<li>
<p>the parent Test Object Type in the hierarchy; for root nodes "-" is shown</p>
</li>
<li>
<p>an XPath expression that can be used to detect a Test Object Type (for XML documents), if one exists</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In future versions of ETF it is planned that new Test Object Types may
be specified by a test developer defined and declared in XML in the
<code>include-metadata</code> directory.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="tot-documents">3.10.2. Set of documents</h4>
<div class="paragraph">
<p>A set of documents.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDbec4dd69-72b9-498e-a693-88e3d59d2552</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p>-</p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-xml">3.10.3. Set of XML documents</h4>
<div class="paragraph">
<p>A set of XML documents.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID810fce18-4bf5-4c6c-a972-6962bbe3b76b</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-documents">Set of documents</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_metadata_records">3.10.4. Metadata records</h4>
<div class="paragraph">
<p>A set of XML documents. Each document contains one or more gmd:MD_Metadata elements.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID5a60dded-0cb0-4977-9b06-16c6c2321d2e</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-xml">Set of XML documents</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'GetRecordsResponse' and starts-with(namespace-uri() = 'http://www.opengis.net/cat/csw/')] | /*[local-name() = 'MD_Metadata' and namespace-uri() = 'http://www.isotc211.org/2005/gmd']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-gml">3.10.5. GML feature collections</h4>
<div class="paragraph">
<p>A set of XML documents. Each document contains a GML feature collection.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDe1d4a306-7a78-4a3b-ae2d-cf5f0810853e</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-xml">Set of XML documents</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_wfs_2_0_feature_collections">3.10.6. WFS 2.0 feature collections</h4>
<div class="paragraph">
<p>A set of XML documents. Each document contains a WFS 2.0 feature collection.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDa8a1b437-0ebf-454c-8204-bcf0b8548d8c</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-gml">GML feature collections</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'FeatureCollection' and namespace-uri() = 'http://www.opengis.net/wfs/2.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_gml_3_2_feature_collections">3.10.7. GML 3.2 feature collections</h4>
<div class="paragraph">
<p>A set of XML documents. Each document contains a GML 3.2 feature collection.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDc8aaacd7-df33-4d64-89af-fabeae63a958</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-gml">GML feature collections</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'FeatureCollection' and namespace-uri() = 'http://www.opengis.net/gml/3.2']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_gml_2_1gml_3_1_feature_collections">3.10.8. GML 2.1/GML 3.1 feature collections</h4>
<div class="paragraph">
<p>A set of XML documents. Each document contains a GML 2.1 or GML 3.1 feature collection.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID123b2f9b-c9f4-4379-8bf1-e9a656a14bd0</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-gml">GML feature collections</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'FeatureCollection' and namespace-uri() = 'http://www.opengis.net/gml']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_inspire_spatialdataset_documents">3.10.9. INSPIRE SpatialDataSet documents</h4>
<div class="paragraph">
<p>A set of XML documents. Each document contains an INSPIRE SpatialDataSet.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID057d7919-d7b8-4d77-adb8-0d3118b3d220</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-gml">GML feature collections</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'SpatialDataSet' and starts-with(namespace-uri(), 'http://inspire.ec.europa.eu/schemas/base/')]</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_citygml_2_0_citymodel_documents">3.10.10. CityGML 2.0 CityModel documents</h4>
<div class="paragraph">
<p>A set of XML documents. Each document contains a CityGML 2.0 CityModel.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID3e3639b1-f6b7-4d62-9160-963cfb2ea300</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-gml">GML feature collections</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'CityModel' and namespace-uri() = 'http://www.opengis.net/citygml/2.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_citygml_1_0_citymodel_documents">3.10.11. CityGML 1.0 CityModel documents</h4>
<div class="paragraph">
<p>A set of XML documents. Each document contains a CityGML 1.0 CityModel.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDd9371e42-2bf4-420c-84a5-4ab9055a8706</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-gml">GML feature collections</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'CityModel' and namespace-uri() = 'http://www.opengis.net/citygml/1.0']</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="basex-test-item-types">3.11. Test Item Types</h3>
<div class="sect3">
<h4 id="_overview_4">3.11.1. Overview</h4>
<div class="paragraph">
<p>This section lists all <a href="#test-item-types">Test Item Types</a> that are pre-defined in the BaseX test driver.</p>
</div>
<div class="paragraph">
<p>For each Test Item Type, the following information is provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a description</p>
</li>
<li>
<p>the ID that must be used to reference the Test Item Type from a test step or test assertion</p>
</li>
<li>
<p>whether the type is applicable to test steps or test assertions</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_dummy_test_step">3.11.2. Dummy Test Step</h4>
<div class="paragraph">
<p>In BaseX-based Executable Test Suites the concept of test steps is not used. A dummy test step, which is suppressed in test reports, is therefore created and associated with this test item type.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDf483e8e8-06b9-4900-ab36-adad0d7f22f0</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Step</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_xquery">3.11.3. XQuery</h4>
<div class="paragraph">
<p>The element <code>etf:expression</code> in a test assertion contains an XQuery fragment that is executed to determine the result.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDf0edc596-49d2-48d6-a1a1-1ac581dcde0a</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Assertion</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_manual_review">3.11.4. Manual review</h4>
<div class="paragraph">
<p>The element <code>etf:expression</code> in a test assertion is ignored and the assertion result status is always 'PASSED_MANUAL' indicating that a manual review from an expert is required. The review must be specified in the description of the test assertion.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDb48eeaa3-6a74-414a-879c-1dc708017e11</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Assertion</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_disabled">3.11.5. Disabled</h4>
<div class="paragraph">
<p>The element <code>etf:expression</code> in a test assertion is ignored and the assertion result status is always 'NOT_APPLICABLE'. The test assertion is disabled. This type should be used only temporarily to disable a test assertion with known issues.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID92f22a19-2ec2-43f0-8971-c2da3eaafcd2</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Assertion</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dependencies">3.12. Dependencies</h3>
<div class="paragraph">
<p>Executable Test Suites may depend on other Executable Test Suites. This
dependency has two effects. Assume we have three test suites where test
suite A depends on test suite B which in turn depends on test suite C.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If a user starts a test run for suite A on a set of XML documents, the
test run will first test the XML documents against test suite C, then
against test suite B and finally test suite A.</p>
</li>
<li>
<p>If a test suite fails, all dependent test suites will still be executed</p>
<div class="ulist">
<ul>
<li>
<p>in order to provide a complete picture. Otherwise a small error in a
test suite for some basic tests would block all further tests.
For example, if test suite B fails, test suite A will still be executed.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The user will be prompted to set parameters for test suite A, which
will also be passed to test suite B and C. If test suite B or C declare
different parameters than test suite A, the default values for these
parameters will be used. Undefined parameters will be ignored.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, within a test suite, dependencies may also be declared
between test cases from the same test suite. Again, dependent test cases will be skipped, if a
test case fails. With test cases dependencies, it is the responsibility
of the developers to ensure that test cases are executed in a sequence
that is consistent with the dependencies.</p>
</div>
<div class="paragraph">
<p>Here are examples how dependencies are declared in XML in an
<code>etf:ExecutableTestSuite</code> document.</p>
</div>
<div class="exampleblock">
<div class="title">Example 14. A dependency to another test suite</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;ExecutableTestSuite ...&gt;
  ...
  &lt;dependencies&gt;
    &lt;executableTestSuite ref=&quot;EID545f9e49-009b-4114-9333-7ca26413b5d4&quot;/&gt;
  &lt;/dependencies&gt;
  ...
&lt;/ExecutableTestSuite&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 15. A dependency to another test case</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;ExecutableTestSuite ...&gt;
  ...
  &lt;TestCase ...&gt;
    ...
    &lt;dependencies&gt;
      &lt;testCase ref=&quot;EID2ee0045f-cf8d-4979-9d7d-76cb465a0314&quot;/&gt;
    &lt;/dependencies&gt;
    ...
  &lt;TestCase ...&gt;
  ...
&lt;/ExecutableTestSuite&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 16. An INSPIRE test suite with dependencies</div>
<div class="content">
<div class="paragraph">
<p>The <a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/metadata/iso/ets-md-iso-bsxets.xml">Executable Test Suite for the Conformance Class "INSPIRE Profile based on EN ISO 19115 and EN ISO 19119" in INSPIRE</a> includes both kinds of dependencies.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_tags">3.13. Tags</h3>
<div class="paragraph">
<p>To associate an Executable Test Suite with a <a href="#tags">tag</a>, the tag is referenced from the XML document of the test suite.</p>
</div>
<div class="exampleblock">
<div class="title">Example 17. Associate a test suite with a tag</div>
<div class="content">
<div class="paragraph">
<p>The tag element in the following snippet associates the tag with <code>id</code> <code>EID7f57420f-b228-41ae-9467-86e7ffef6e7e</code> with the test suite:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;ExecutableTestSuite ...&gt;
  ...
  &lt;tags&gt;
      &lt;tag ref=&quot;EID7f57420f-b228-41ae-9467-86e7ffef6e7e&quot;/&gt;
  &lt;/tags&gt;
  ...
&lt;/ExecutableTestSuite&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The tag is declared <a href="#tags">in XML in a separate document</a>, in the
<code>include-metadata</code> directory.</p>
</div>
<div class="exampleblock">
<div class="title">Example 18. An INSPIRE test suite with a tag</div>
<div class="content">
<div class="paragraph">
<p>The <a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/metadata/iso/ets-md-iso-bsxets.xml">Executable Test Suite for the Conformance Class "INSPIRE Profile based on EN ISO 19115 and EN ISO 19119" in INSPIRE</a> is associated with a  <a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/include-metadata/Tag-EID3b9846c7-3940-4795-ae1d-0b5d82375c76.xml">tag for test suites for metadata according to version 1.3 of the INSPIRE technical guidance for metadata</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_statistical_information">3.14. Statistical information</h3>
<div class="paragraph">
<p>If a test result includes an <a href="#basex-attachments">attachment</a> with the type "StatisticalReport", a statistical table is included in the test report. The root element must be an <code>etf:StatisticalReportTable</code> and all <code>etf:entry</code> elements are shown - the value before the semicolon in a column "Type" (feature type or metadata record type) and the value after the semicolon in a column "Count" (number of features or metadata records of that type).</p>
</div>
<div class="exampleblock">
<div class="title">Example 19. A sample StatisticalReportTable attachment</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;StatisticalReportTable xmlns=&quot;http://www.interactive-instruments.de/etf/2.0&quot;&gt;
&lt;type ref=&quot;EID242272e0-3f0a-4e9c-9643-657c4d6d304a&quot;/&gt;
&lt;entries&gt;
&lt;entry&gt;all; 10&lt;/entry&gt;
&lt;entry&gt;dataset; 5&lt;/entry&gt;
&lt;entry&gt;service; 5&lt;/entry&gt;
&lt;/entries&gt;
&lt;/StatisticalReportTable&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="basex-attachments">3.15. Attachments</h3>
<div class="paragraph">
<p>An Executable Test Suite may record additional information to a test
result as attachments. In the case of tests on XML documents, these are
typically the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A log file that includes the information that the XQuery logs using
the log() function. If the <code>type</code> attribute is set to "LogFile", the
information will be included in the HTML test report.</p>
</li>
<li>
<p>A file with statistical information of the content of the XML
documents. If the <code>type</code> attribute is set to "StatisticalReport", the
information will be included in the HTML test report.</p>
</li>
<li>
<p>A file with the dynamic XQuery, which may help with debugging in case
of any errors.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Attachments are written to the temporary directory (variable <code>$tmpDir</code>)
and the links to them are included in the <code>etf:TestTaskResult</code>.</p>
</div>
<div class="exampleblock">
<div class="title">Example 20. Example how attachments are referenced in a test result</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;attachments&gt;
  &lt;Attachment id=&quot;EID4c16160f-9004-467d-bf49-72b7da258eff&quot; type=&quot;LogFile&quot;&gt;
    &lt;label&gt;Log file&lt;/label&gt;
    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
    &lt;mimeType&gt;text/plain&lt;/mimeType&gt;
    &lt;referencedData href=&quot;http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDfa95b457-0d69-458f-98f3-6eae9b7f388d/Attachments/EID4c16160f-9004-467d-bf49-72b7da258eff&quot;/&gt;
  &lt;/Attachment&gt;
  &lt;Attachment id=&quot;EIDd9f69337-4ae0-4df2-a058-46b71e15135c&quot; type=&quot;StatisticalReport&quot;&gt;
    &lt;label&gt;Metadata record statistics&lt;/label&gt;
    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
    &lt;mimeType&gt;application/xml&lt;/mimeType&gt;
    &lt;referencedData href=&quot;http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDfa95b457-0d69-458f-98f3-6eae9b7f388d/Attachments/EIDd9f69337-4ae0-4df2-a058-46b71e15135c&quot;/&gt;
  &lt;/Attachment&gt;
  &lt;Attachment id=&quot;EID0fed0d42-39a3-4692-8e38-e78e2f87507a&quot; type=&quot;Query&quot;&gt;
    &lt;label&gt;XQuery executed against the dataset&lt;/label&gt;
    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
    &lt;mimeType&gt;text/plain&lt;/mimeType&gt;
    &lt;referencedData href=&quot;http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDfa95b457-0d69-458f-98f3-6eae9b7f388d/Attachments/EID0fed0d42-39a3-4692-8e38-e78e2f87507a&quot;/&gt;
  &lt;/Attachment&gt;
&lt;/attachments&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_schematron">3.16. Schematron</h3>
<div class="paragraph">
<p>The
<a href="https://github.com/interactive-instruments/etf-ets-repository/tree/master/utils">etf-ets-repository</a>
provides two Stylesheets for generating
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/utils/schematron_2_etf_ets.xsl">ETF Executable Test Suites</a>
for the BaseX test driver and for generating
<a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/utils/schematron_2_etf_translation_template_bundle.xsl">Translation Template Bundles</a>
from Schematron files.</p>
</div>
<div class="paragraph">
<p>The Stylesheets map all information that are found in the Schematron file, but
since descriptors and labels are optional in the Schematron format and may be
absent, it is recommended to manually edit the generated ETS and
add these information.</p>
</div>
<div class="paragraph">
<p>The procedure to generate the ETS and the Translation Template Bundle is
described <a href="https://github.com/interactive-instruments/etf-ets-repository/blob/master/utils/Readme.md#transform-a-schematron-file-to-an-etf-version-2-executable-test-suite">here</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_soapui_based_test_suites">4. SoapUI based Test Suites</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_required_knowledge_2">4.1. Required knowledge</h3>
<div class="paragraph">
<p>You should be familiar with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.soapui.org/getting-started/your-first-soapui-project.html">SoapUI</a></p>
</li>
<li>
<p><a href="http://groovy-lang.org/">Groovy</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_development_environment_2">4.2. Development environment</h3>
<div class="paragraph">
<p>A SoapUI Executable Test Suite is developed and tested using the
SoapUI GUI application.</p>
</div>
<div class="sect3">
<h4 id="_installation_2">4.2.1. Installation</h4>
<div class="paragraph">
<p>Prerequisites for the following steps to set up the ETS development environment are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Windows OS (it may work on Linux, too, but it is known to not work under macOS)</p>
</li>
<li>
<p>Java 1.8</p>
</li>
<li>
<p>SoapUI 5.3.0 installed</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then follow these steps under Windows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Download <a href="https://services.interactive-instruments.de/etfdev-af/etf-public-dev/de/interactive_instruments/etf/suim/SoapUI-ETF.zip">this ZIP file</a> (using "etf-public-dev" as username and password)</p>
</li>
<li>
<p>Extract the ZIP file in any directory</p>
</li>
<li>
<p>Run 'install-plugins.bat'</p>
</li>
<li>
<p>Run 'SoapUI 5.3.0.bat'</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To load the plugins, SoapUI must always be started with the 'SoapUI 5.3.0.bat' file from the extracted directory.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This procedure is required as <a href="https://github.com/SmartBear/soapui/pull/201">Smartbear decided to lock out unsigned plugins</a>. Because the signing process is not transparent to us, we decided to use this workaround.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_first_steps">4.2.2. First steps</h4>
<div class="paragraph">
<p>Start SoapUI with the 'SoapUI 5.3.0.bat' batch file. After the user interface
appears, open the 'Tutorial workspace' by clicking on 'File' &#8594; 'Switch workspace',
then select the file 'tutorial-soapui-workspace.xml' from the 'SoapUI ETF\tutorial'
directory.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27561133-41ba072e-5ac7-11e7-89bc-5685f8655363.png" alt="27561133 41ba072e 5ac7 11e7 89bc 5685f8655363"></span></p>
</div>
<div class="paragraph">
<p>The workspace should open and load the 'Tutorial - Pre-defined WFS' test project.</p>
</div>
<div class="paragraph">
<p>To test whether the extension is working properly, a web service can be tested
with the test project 'Tutorial - Pre-defined WFS'. Therefore click on the
test project and then on 'Custom Properties' in the lower left corner. Change
the 'serviceEndpoint' property by double clicking on the 'Value' cell.</p>
</div>
<div class="paragraph">
<p>Enter the URL to a INSPIRE Pre-defined download service. The test project will
check if the GetCapabilities response is schema valid and that an
INSPIRE ExtendedCapabilities element exists. To see the test fail, a URL to a
WFS 2.0 service without an ExtendedCapabilities element can also be entered.</p>
</div>
</div>
<div class="sect3">
<h4 id="_executing_tests_2">4.2.3. Executing tests</h4>
<div class="paragraph">
<p>To execute a test suite against a web service set the serviceEndpoint property
and the username and password (authUser and authPwd properties) if the service
requires authentication. These properties can be changed after clicking on
the test project and then on 'Custom Properties' in the lower left corner.</p>
</div>
<div class="paragraph">
<p>Double click on the test project, click on the 'Test Suites' tab
and start the test run with a click on the green arrow.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27562673-e27f6400-5acd-11e7-9c69-af1a5740efc9.png" alt="27562673 e27f6400 5acd 11e7 9c69 af1a5740efc9"></span></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basics_2">4.3. Basics</h3>
<div class="paragraph">
<p><a href="http://www.soapui.org">SoapUI</a> is an open-source web service testing
application originally developed for testing service-oriented architectures
(SOA) and REST services. In ETF, it is extended via plugins and used to test
spatial web services.</p>
</div>
<div class="paragraph">
<p>SoapUI and ETF are using a slightly different terminology for test items, as the
following table shows.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Table 1. Mapping between SoapUI and ETF concepts</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>SoapUI</strong></th>
<th class="tableblock halign-left valign-top"><strong>ETF</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Project</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Executable Test Suite</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Suite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Case</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Step</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Assertion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Assertion</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Each project must possess properties which are used to provide metadata for ETF
and for passing user data into SoapUI, for example the service URL to test.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27132670-fb733832-510f-11e7-941d-f328250e7fd0.png" alt="27132670 fb733832 510f 11e7 941d f328250e7fd0"></span></p>
</div>
<div class="paragraph">
<p>Open the Test Suite 'Capabilities' from the 'Tutorial - Pre-defined WFS', then
the 'Extended Capabilities' Test Case and the 'Get Capabilities' test step (see screenshot arrow 1).</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27565109-6e73306e-5adc-11e7-8a63-49b4197464a2.png" alt="27565109 6e73306e 5adc 11e7 8a63 49b4197464a2"></span></p>
</div>
<div class="paragraph">
<p>Properties on the Test project level can be referenced within SoapUI with the
expression <code>${#Project#PROPERTY}</code> (2).</p>
</div>
<div class="paragraph">
<p>Open the Assertion view in the HTTP test step (3) and open the Assertion
'ExtendedCapabilities element exists'.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27565251-6e7055c8-5add-11e7-96bb-3eada8502138.png" alt="27565251 6e7055c8 5add 11e7 96bb 3eada8502138"></span></p>
</div>
<div class="paragraph">
<p>When you click on the green arrow to run the Assertion, the assertion may pass
or you may get this error:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27565229-508c154c-5add-11e7-8a30-30709a14411e.png" alt="27565229 508c154c 5add 11e7 8a30 30709a14411e"></span></p>
</div>
<div class="paragraph">
<p>The error is preprocessed for ETF and will, when SoapUI is run from within the
ETF, reference the 'TR.noDataReturned' translation and output the corresponding error message from the loaded Translation Template Collection (see the parameter etf.translation.template.collection.id below).</p>
</div>
<div class="exampleblock">
<div class="title">Example 21. Error message in the INSPIRE validator</div>
<div class="content">
<div class="paragraph">
<p>The error message in the INSPIRE validator would be (see the entry in the <a href="https://github.com/inspire-eu-validation/ets-repository/blob/master/include-metadata/TranslationTemplateBundle-EIDfadd4929-fa60-4781-b658-703bbfe3f4eb.xml#L13">Translation Template collection</a>):</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>'Expected a response but the service did not return any data. Verify that the used endpoint URL is correct and accessible from outside your organization. If the service requires authentication, then check that the correct credentials are used by the validator or verify that upstream firewalls/proxy servers do not prevent access.'</p>
</div>
</blockquote>
</div>
</div>
</div>
<div class="paragraph">
<p>This error occurs when no data has been received. If a response has been received
but the ExtendedCapabilities element does not exist, you will see the following
message in the assertion log window:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27565300-c1580bc8-5add-11e7-9611-05b312b4d94f.png" alt="27565300 c1580bc8 5add 11e7 9611 05b312b4d94f"></span></p>
</div>
<div class="paragraph">
<p>A more complex example can be found in the 'Stored Query' test suite of the
tutorial project.</p>
</div>
<div class="paragraph">
<p>The installation package also contains two test module templates -one
for testing Web Feature Services and one for web services in general- as starting
point. One of the two templates can be imported in a new test project by right
clicking on the test project and then after a click on 'Import Test Suite' choosing
<code>Initialization-and-basic-checks-soapui-test-suite-template.xml</code> for a web service
or  <code>Initialization-and-basic-checks-wfs-soapui-test-suite-template.xml</code> for
a web feature service.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27772890-835867b8-5f6b-11e7-884e-901c278583fc.png" alt="27772890 835867b8 5f6b 11e7 884e 901c278583fc"></span></p>
</div>
</div>
<div class="sect2">
<h3 id="_parameters_and_metadata_properties">4.4. Parameters and metadata properties</h3>
<div class="paragraph">
<p>Properties are used to parameterize an Executable Test Suite ('test project' in SoapUI terminology) as well as to associate it with other resources of ETF like Tags, Test Object Types etc. The standard properties are described in the following table. All properties are properties of the test project.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Description of standard properties on a SoapUI test project for ETF</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Property name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">serviceEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the service to test</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authUser</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional username for authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authPwd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional password for authentication</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">authMethod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">only the value 'basic' for HTTP basic authentication is supported yet</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.ignore.properties</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If properties are added in the SoapUI test project, which are not known to ETF,
it is assumed that these are parameters for the test suite and their input is required during the start of a test run.
This can be avoided by using this property, which can contain a list of property names that should not be interpreted as parameters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.tag.ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EID reference to one or multiple <a href="#tags">Tags</a>, separated by commas (whitespace is allowed)#</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.translation.template.collection.id</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EID reference to a collection of <a href="#message-template-bundles">Translation Templates</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.supported.test.object.type.ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EID reference to one or more supported <a href="#soapui-test-object-types">Test Object Types</a>, separated by commas (whitespace is allowed)#</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.dependency.ids</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">optional EID reference to one ore multiple Executable Test
Suites this test suite depends on, separated by commas (whitespace is allowed)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.author</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the author of the test suite</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.last.editor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the last editor of the test suite</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.creation.date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date when the test suite was created as ISO 8601 string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.last.update.date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date when the test suite was updated as ISO 8601 string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">etf.version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the test suite</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="soapui-test-object-types">4.5. Test Object Types</h3>
<div class="sect3">
<h4 id="_overview_5">4.5.1. Overview</h4>
<div class="paragraph">
<p>This section lists all Test Object Types that are pre-defined in the SoapUI test driver.</p>
</div>
<div class="paragraph">
<p>For each Test Object Type, the following information is provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a description</p>
</li>
<li>
<p>the ID that must be used to reference the Test Object Type from an Executable Test Suite</p>
</li>
<li>
<p>the parent Test Object Type in the hierarchy; for root nodes "-" is shown</p>
</li>
<li>
<p>an XPath expression that can be used to detect a Test Object Type (for XML documents), if one exists</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In future versions of ETF it is planned that new Test Object Types may
be specified by a test developer defined and declared in XML in the
<code>include-metadata</code> directory.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="tot-service">4.5.2. Web service</h4>
<div class="paragraph">
<p>Any service with an interface using HTTP(S).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID88311f83-818c-46ed-8a9a-cec4f3707365</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p>-</p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-wfs">4.5.3. OGC Web Feature Service</h4>
<div class="paragraph">
<p>A web service implementing the OGC Web Feature Service standard.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDdb12feeb-0086-4006-bc74-28f4fdef0171</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-service">Web service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_feature_service_2_0">4.5.4. OGC Web Feature Service 2.0</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Feature Service 2.0 and OGC Filter Encoding 2.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID9b6ef734-981e-4d60-aa81-d6730a1c6389</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wfs">OGC Web Feature Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'WFS_Capabilities' and namespace-uri() = 'http://www.opengis.net/wfs/2.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_feature_service_1_1">4.5.5. OGC Web Feature Service 1.1</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Feature Service 1.1 and OGC Filter Encoding 1.1.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDbc6384f3-2652-4c7b-bc45-20cec488ecd0</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wfs">OGC Web Feature Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'WFS_Capabilities' and namespace-uri() = 'http://www.opengis.net/wfs' and starts-with(@version,'1.1')]</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_feature_service_1_0_0">4.5.6. OGC Web Feature Service 1.0.0</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Feature Service 1.0 and OGC Filter Encoding 1.0.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID8a560e6a-043f-42ca-b0a3-31b115899593</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wfs">OGC Web Feature Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'WFS_Capabilities' and namespace-uri() = 'http://www.opengis.net/wfs' and @version='1.0.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-wms">4.5.7. OGC Web Map Service</h4>
<div class="paragraph">
<p>A web service implementing the OGC Web Map Service standard.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDbae0df71-0553-438d-938f-028b53ba8aa7</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-service">Web service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_map_service_1_3_0">4.5.8. OGC Web Map Service 1.3.0</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Map Service 1.3.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID9981e87e-d642-43b3-ad5f-e77469075e74</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wms">OGC Web Map Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'WMS_Capabilities' and namespace-uri() = 'http://www.opengis.net/wms' and @version = '1.3.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_map_service_1_1_1">4.5.9. OGC Web Map Service 1.1.1</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Map Service 1.1.1.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDd1836a8d-9909-4899-a0bc-67f512f5f5ac</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wms">OGC Web Map Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'WMT_MS_Capabilities' and @version = '1.1.1']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-wmts">4.5.10. OGC Web Map Tile Service</h4>
<div class="paragraph">
<p>A web service implementing the OGC Web Map Tile Service standard.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID380b969c-215e-46f8-a4e9-16f002f7d6c3</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-service">Web service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_map_tile_service_1_0">4.5.11. OGC Web Map Tile Service 1.0</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Map Tile Service 1.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDae35f7cd-86d9-475a-aa3a-e0bfbda2bb5f</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wmts">OGC Web Map Tile Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'Capabilities' and namespace-uri() = 'http://www.opengis.net/wmts/1.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-wcs">4.5.12. OGC Web Coverage Service</h4>
<div class="paragraph">
<p>A web service implementing the OGC Web Coverage Service standard.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDdf841ddd-20d4-4551-8bc2-a4f7267e39e0</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-service">Web service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_coverage_service_2_0">4.5.13. OGC Web Coverage Service 2.0</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Coverage Service 2.0 and OGC Filter Encoding 2.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDdac58b52-3ffd-4eb5-96e3-64723d8f0f51</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wcs">OGC Web Coverage Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'Capabilities' and namespace-uri() = 'http://www.opengis.net/wcs/2.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_coverage_service_1_1">4.5.14. OGC Web Coverage Service 1.1</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Coverage Service 1.1.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID824596fa-ec04-4314-bf1a-f1e6ee119bf0</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wcs">OGC Web Coverage Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'Capabilities' and namespace-uri() = 'http://www.opengis.net/wcs/1.1']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_web_coverage_service_1_0_0">4.5.15. OGC Web Coverage Service 1.0.0</h4>
<div class="paragraph">
<p>A web service implementing OGC Web Coverage Service 1.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID4d4bffed-0a18-43d3-98f4-f5e7055b02e4</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-wcs">OGC Web Coverage Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'WCS_Capabilities' and namespace-uri() = 'http://www.opengis.net/wcs']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-sos">4.5.16. OGC Sensor Observation Service</h4>
<div class="paragraph">
<p>A web service implementing the OGC Sensor Observation Service standard.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDadeb8bc4-c49b-4704-ba88-813aea5de31d</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-service">Web service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_sensor_observation_service_2_0">4.5.17. OGC Sensor Observation Service 2.0</h4>
<div class="paragraph">
<p>A web service implementing OGC Sensor Observation Service 2.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDf897f313-55f0-4e51-928a-0e9869f5a1d6</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-sos">OGC Sensor Observation Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'Capabilities' and namespace-uri() = 'http://www.opengis.net/sos/2.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-csw">4.5.18. OGC Catalogue Service</h4>
<div class="paragraph">
<p>A web service implementing the OGC Catalogue Service standard.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID18bcbc68-56b9-4e8e-b0d1-90de324d0cc8</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-service">Web service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>-</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_catalogue_service_3_0">4.5.19. OGC Catalogue Service 3.0</h4>
<div class="paragraph">
<p>A web service implementing OGC Catalogue Service 3.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EIDb2a780a8-5bba-4780-bcd5-c8c909ac407d</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-csw">OGC Catalogue Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'Capabilities' and namespace-uri() = 'http://www.opengis.net/cat/csw/3.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="tot-csw-202">4.5.20. OGC Catalogue Service 2.0.2</h4>
<div class="paragraph">
<p>A web service implementing OGC Catalogue Service 2.0.2.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID4b0fb35d-10f0-47df-bc0b-6d4548035ae2</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-csw">OGC Catalogue Service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'Capabilities' and namespace-uri() = 'http://www.opengis.net/cat/csw/2.0.2']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_ogc_csw_ebrim_registry_service_1_0">4.5.21. OGC CSW-ebRIM Registry Service 1.0</h4>
<div class="paragraph">
<p>A web service implementing the CSW-ebRIM Registry Service 1.0.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID9b101002-e65e-4d96-ac45-fcb95ac6f507</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-csw-202">OGC Catalogue Service 2.0.2</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'Capabilities' and namespace-uri() = 'http://www.opengis.net/cat/wfs/1.0']</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_atom_feed">4.5.22. Atom feed</h4>
<div class="paragraph">
<p>A feed implementing the Atom Syndication Format that can be accessed using HTTP(S).</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>EID49d881ae-b115-4b91-aabe-31d5791bce52</p>
</dd>
<dt class="hdlist1">Parent</dt>
<dd>
<p><a href="#tot-service">Web service</a></p>
</dd>
<dt class="hdlist1">XPath</dt>
<dd>
<p>/*[local-name() = 'feed' and namespace-uri() = 'http://www.w3.org/2005/Atom']</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="soapui-test-item-types">4.6. Test Item Types</h3>
<div class="sect3">
<h4 id="_overview_6">4.6.1. Overview</h4>
<div class="paragraph">
<p>This section lists all <a href="#test-item-types">Test Item Types</a> that are pre-defined in the SoapUI test driver.</p>
</div>
<div class="paragraph">
<p>For each Test Item Type, the following information is provided:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a description</p>
</li>
<li>
<p>the ID that must be used to reference the Test Item Type from a test step or test assertion</p>
</li>
<li>
<p>whether the type is applicable to test steps or test assertions</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_http_request_step">4.6.2. HTTP Request Step</h4>
<div class="paragraph">
<p><a href="https://www.soapui.org/functional-testing/teststep-reference/http-request/.html">See the SoapUI documentation</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>6b16aa44-bdc7-4120-a790-4b74fc9ace62</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Step</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_script_test_step">4.6.3. Script Test Step</h4>
<div class="paragraph">
<p><a href="https://www.soapui.org/functional-testing/working-with-scripts.html">See the SoapUI documentation</a>.
The <a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/index.html?de/interactive_instruments/etf/suim/Assert.html">Assertion library</a>
can be used in a Script Test Step.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>90bdc939-bd42-41a0-9ef8-19e0ec04f89d</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Step</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_schema_validation_assertion">4.6.4. Schema Validation Assertion</h4>
<div class="paragraph">
<p>Validates a XML response against the schema provided in the xsi:schemaLocation .</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>5ee1ae1a-e79f-41bb-bfb0-62cef89ca460</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Assertion</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_script_assertion">4.6.5. Script Assertion</h4>
<div class="paragraph">
<p><a href="https://www.soapui.org/functional-testing/validating-messages/using-script-assertions.html">See the SoapUI documentation</a>.
The <a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/index.html?de/interactive_instruments/etf/suim/Assert.html">Assertion library</a>
can be used in a Script Assertion.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>fad9282c-1f1f-492b-b6ab-248430154310</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Assertion</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_xpath_match_assertion">4.6.6. XPath Match Assertion</h4>
<div class="paragraph">
<p><a href="https://www.soapui.org/functional-testing/validating-messages/validating-xml-messages.html">See the SoapUI documentation</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>73c00044-a592-450f-8aff-7fb1da91c1df</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Assertion</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_xquery_match_assertion">4.6.7. XQuery Match Assertion</h4>
<div class="paragraph">
<p><a href="https://www.soapui.org/functional-testing/validating-messages/validating-xml-messages.html">See the SoapUI documentation</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>5c28b666-4dda-43af-aa6e-1eed6212d8d8</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Assertion</p>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_basic_assertion">4.6.8. Basic Assertion</h4>
<div class="paragraph">
<p>All other assertions, like the
<a href="https://www.soapui.org/functional-testing/validating-messages/getting-started-with-assertions.html#2-1-1-2-SLA">SLA assertion</a>,
are mapped to this type.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">ID</dt>
<dd>
<p>e7e29c93-4c50-41c2-82d1-0f2db6a1abf6</p>
</dd>
<dt class="hdlist1">Item</dt>
<dd>
<p>Test Assertion</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect2">
<h3 id="soapui-attachments">4.7. Attachments</h3>
<div class="paragraph">
<p>The SoapUI test driver can attach different data to the test report.</p>
</div>
<div class="paragraph">
<p>A <code>Message</code> is attached to provide additional information that
may be useful.</p>
</div>
<div class="exampleblock">
<div class="title">Example 22. Message</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;Attachment type=&quot;Message&quot; id=&quot;EID6afae437-88f2-4a9d-970a-8255d3872588&quot;&gt;
          &lt;label&gt;Message.2&lt;/label&gt;
          &lt;encoding&gt;UTF-8&lt;/encoding&gt;
          &lt;mimeType&gt;text/plain&lt;/mimeType&gt;
          &lt;referencedData href=&quot;http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDb8f61761-4b25-47b5-8851-038615231f54/Attachments/EID6afae437-88f2-4a9d-970a-8255d3872588&quot;/&gt;
&lt;/Attachment&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The parameters of a HTTP GET request are base64 encoded and embedded as
attachment of type 'GetParameter'.</p>
</div>
<div class="exampleblock">
<div class="title">Example 23. GetParameter</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;Attachment type=&quot;GetParameter&quot; id=&quot;EID9294c44b-5650-48b3-a25c-27dfe6b35c0c&quot;&gt;
          &lt;label&gt;Request Parameter&lt;/label&gt;
          &lt;encoding&gt;UTF-8&lt;/encoding&gt;
          &lt;mimeType&gt;text/plain&lt;/mimeType&gt;
          &lt;embeddedData&gt;aHR0cDovL2dlb3NlcnZlci55bXBhcmlzdG8uZmkvZ2Vvc2VydmVyL3dmcz9SRVFVRVNUPUdldENhcGFiaWxpdGllcyZWRVJTSU9OPTIuMC4wJlNFUlZJQ0U9d2ZzJkFDQ0VQVFZFUlNJT05TPTIuMC4w&lt;/embeddedData&gt;
&lt;/Attachment&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>A HTTP POST request is referenced from an attachment of type 'PostData'.</p>
</div>
<div class="exampleblock">
<div class="title">Example 24. PostData</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;Attachment type=&quot;PostData&quot; id=&quot;EID64f3f170-3833-4308-9c8c-d881641ccc75&quot;&gt;
  &lt;label&gt;Request Parameter&lt;/label&gt;
  &lt;encoding&gt;UTF-8&lt;/encoding&gt;
  &lt;mimeType&gt;text/xml&lt;/mimeType&gt;
  &lt;referencedData href=&quot;http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EID929e32b2-286f-46af-a5cf-de557c36d146/Attachments/EID64f3f170-3833-4308-9c8c-d881641ccc75&quot;/&gt;
&lt;/Attachment&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Service responses referenced from 'ServiceResponse' attachments.</p>
</div>
<div class="exampleblock">
<div class="title">Example 25. ServiceResponse</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;Attachment type=&quot;ServiceResponse&quot; id=&quot;EID3d6d11e3-8d86-4880-b095-a851af095dec&quot;&gt;
        &lt;label&gt;Service Response&lt;/label&gt;
        &lt;encoding&gt;UTF-8&lt;/encoding&gt;
        &lt;mimeType&gt;application/gzip&lt;/mimeType&gt;
&lt;referencedData href=&quot;http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDb8f61761-4b25-47b5-8851-038615231f54/Attachments/EID3d6d11e3-8d86-4880-b095-a851af095dec&quot;/&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assertion_library">4.8. Assertion library</h3>
<div class="paragraph">
<p>The SoapUI extension library provides various functions for evaluating an XPath
expression against the received response. The functions are called on an
<a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/index.html?de/interactive_instruments/etf/suim/Assert.html">Assert</a>
object, which is constructed like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="Groovy"><span></span>import de.interactive_instruments.etf.suim.*
Assert a = new Assert(messageExchange, context, log, Assert.INSPIRE_DS_NS)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The parameters <code>messageExchange</code>, <code>context</code> and <code>log</code> are pre-defined in the context of the assertion. The last parameter of the constructor is the only part that varies. It is a map of namespace prefixes to the namespace URI.</p>
</div>
<div class="paragraph">
<div class="title">Example Assertion</div>
<p><span class="image"><img src="https://user-images.githubusercontent.com/13570741/27563693-66e76936-5ad3-11e7-8f53-4605927b7ad3.png" alt="27563693 66e76936 5ad3 11e7 8f53 4605927b7ad3"></span></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Currently, the library provides one pre-defined map for INSPIRE Download Services
<a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/de/interactive_instruments/etf/suim/Assert.html#INSPIRE_DS_NS">INSPIRE_DS_NS</a>.
Additional namespace maps for specific topics will be added in the future for convenience.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For further information on the Assert class and its functions see the
<a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/index.html?de/interactive_instruments/etf/suim/Assert.html">Assert API documentation</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_translation_templates">4.9. Translation Templates</h3>
<div class="paragraph">
<p>The Translation Template Collection referenced with the
<code>etf.translation.template.collection.id</code> property must provide all messages that
can be returned by the
<a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/de/interactive_instruments/etf/suim/Assert.html">Assertion library</a>.
The <a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/de/interactive_instruments/etf/suim/Assert.html">Assertion library documentation</a>
describes which function returns a specific error message with which parameters.</p>
</div>
<div class="paragraph">
<p>The following Translation Template Bundle can be used as a starting point.
The error texts should be self-describing for the errors and their occurrences.</p>
</div>
<div class="exampleblock">
<div class="title">Example 26. Translation Template Bundle template for the SoapUI Assertion library</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;TranslationTemplateBundle xmlns=&quot;http://www.interactive-instruments.de/etf/2.0&quot; id=&quot;EIDxxxxxx&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.interactive-instruments.de/etf/2.0 https://resources.etf-validator.net/schema/v2/val/ignoreRef.xsd&quot;&gt;
    &lt;translationTemplateCollections&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.noDataReturned&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.noDataReturned&quot;&gt;Expected a response but the service did not return any data. Verify that the used endpoint URL is correct and accessible from outside your organization. If the service requires authentication, then check that the correct credentials are used by the validator or verify that upstream firewalls/proxy servers do not prevent access.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.xmlExpected&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.xmlExpected&quot;&gt;Expected a XML response but the service returned unparseable data. Verify that the used endpoint URL is correct and accessible from outside your organization. If the service requires authentication, then check that the correct credentials are used by the validator or verify that upstream firewalls/proxy servers do not prevent access.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.unexpectedHtml&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.unexpectedHtml&quot;&gt;Expected a XML response but the service returned a HTML page. Verify that the used endpoint URL is correct and accessible from outside your organization. If the service requires authentication and returned an authentication page, then check that the correct credentials are used by the validator or verify that upstream firewalls/proxy servers do not prevent access.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.missingElement&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.missingElement&quot;&gt;The expected element &#39;{element}&#39; was not found in the response. XPath: {xpath}&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.elementNotExpected&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.elementNotExpected&quot;&gt;&#39;{element}&#39; was NOT expected in the response. XPath: {xpath}&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.elementsNotExpected&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.elementsNotExpected&quot;&gt;&#39;{elements}&#39; were not expected in the response. XPath: {xpath}&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.invalidValue&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.invalidValue&quot;&gt;Expected the value &#39;{value}&#39; instead of &#39;{acutal}&#39; in {name}. XPath: {xpath}&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.emptyValue&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.emptyValue&quot;&gt;Expected a non-empty text value for &#39;{element}&#39;. XPath: {xpath}&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.elementWithValueNotExpected&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.elementWithValueNotExpected&quot;&gt;An element &#39;{name}&#39; with the value &#39;{value}&#39; was NOT expected in the response. XPath: {xpath}&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.unexpectedException&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.unexpectedException&quot;&gt;The service returned an unexpected exception: &#39;{text}&#39;. Check the request parameters, which are partially determined from the Capabilities, previous requests or other metadata. Ensure that the service supports the data and functionalities published in the Capabilties and ensure that referenced data exist.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.preCondition.testStep.xmlExpected&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.preCondition.testStep.xmlExpected&quot;&gt;The required response of the test step &#39;{testStepName}&#39; can not be used for this test, due to not well-formed XML has been returned.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.preCondition.testStep.unexpectedException&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.preCondition.testStep.unexpectedException&quot;&gt;The required response of the test step &#39;{testStepName}&#39; can not be used for this test, due to an exception report has been returned.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.preCondition.testStep.noDataReturned&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.preCondition.testStep.noDataReturned&quot;&gt;The required response of the test step &#39;{testStepName}&#39; can not be used for this test, due to no data has been returned.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.preCondition.testStep.missingElement&quot;&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.preCondition.testStep.missingElement&quot;&gt;The test compares data from this response with data from another test step, however the element &#39;{element}&#39; could not be found or has an empty value in test step &#39;{testStepName}&#39;.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.missingSchemaLocation&quot;&gt;
            &lt;!-- Used by the schema validation assertion --&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.missingSchemaLocation&quot;&gt;The schema attribute &#39;xsi:schemaLocation&#39; was not found in the XML root element of the response. The response cannot be validated.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.initializationAndBasicChecksFailed&quot;&gt;
            &lt;!-- Thrown when a WFS is auto configured and the library initialization fails --&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.initializationAndBasicChecksFailed&quot;&gt;The testing of basic functionalities of the service failed and therefore all other test cases are skipped. Check all failed Test Cases in the &#39;Initialization and basic checks&#39; module and ensure that the endpoints for GetCapabilities, GetFeature and DescribeFeatureType operations are accesible from outside your organization.&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.fallbackInfo&quot;&gt;
            &lt;!-- TR.fallbackInfo is used when messages are thrown and no translation name is provided --&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.fallbackInfo&quot;&gt;{INFO}&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
        &lt;LangTranslationTemplateCollection name=&quot;TR.internalError&quot;&gt;
            &lt;!-- Thrown when an internal error occurs in the Assertion library --&gt;
            &lt;translationTemplates&gt;
                &lt;TranslationTemplate language=&quot;en&quot; name=&quot;TR.internalError&quot;&gt;Internal error in the Executable Test Suite. Please contact a system administrator. Error information: {text}&lt;/TranslationTemplate&gt;
            &lt;/translationTemplates&gt;
        &lt;/LangTranslationTemplateCollection&gt;
    &lt;/translationTemplateCollections&gt;
&lt;/TranslationTemplateBundle&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_limitations_from_soapui_concepts_to_etf">4.10. Mapping limitations from SoapUI concepts to ETF</h3>
<div class="paragraph">
<p>In order not to make the report too technical, the following test steps are not recorded:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Properties test steps</p>
</li>
<li>
<p>Property Transfer test steps</p>
</li>
<li>
<p>Conditional Goto test steps</p>
</li>
<li>
<p>Run TestCase (but dependencies are set)</p>
</li>
<li>
<p>Delay</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following test steps are not supported as they are not required (yet):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SOAP (use HTTP test request step instead)</p>
</li>
<li>
<p>REST (use HTTP test request step instead)</p>
</li>
<li>
<p>AMF</p>
</li>
<li>
<p>JDBC</p>
</li>
<li>
<p>SOAP Mock Response</p>
</li>
<li>
<p>Manuel TestStep (instead use translation template names, starting with <code>TR.manual.</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_tips_for_creating_helpful_test_suites">4.11. Tips for creating helpful test suites</h3>
<div class="ulist">
<ul>
<li>
<p>Always provide a description for test projects, test suites, test cases and test steps.</p>
</li>
<li>
<p>Avoid to use XPath assertions as you can not reference a helpful error message in
a translation template.</p>
</li>
<li>
<p>Prefer Script Assertions to XQuery match assertions. If you need to use XQuery
assertions you can reference translation templates by returning a xml element
 <code>&lt;etfTranslate what='TR.myMessage'/&gt;</code>. Parameters can be passed as well
<br></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>  &lt;etfTranslate what='TR.missingElement'&gt;
    &lt;element&gt;ExtendedCapabilities&lt;/element&gt;
    &lt;xpath&gt;/wfs:WFS_Capabilities/ows:OperationsMetadata/ows:ExtendedCapabilities/inspire_dls:ExtendedCapabilities[1]&lt;/xpath&gt;
  &lt;/etfTranslate&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the <a href="http://interactive-instruments.github.io/etf-sui-ae/groovydoc/de/interactive_instruments/xtf/ProjectHelper.html">ProjectHelper</a>
to execute other test steps from within loops</p>
</li>
<li>
<p>Set a timeout for each HTTP test step (SLA assertion).</p>
</li>
<li>
<p>Use the 'Run TestCase' test step in order to show dependencies between test
cases in the report.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_team_engine_based_test_suites">5. TEAM-Engine-based test suites</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_7">5.1. Overview</h3>
<div class="paragraph">
<p>Support for the TEAM Engine is different then for the other test engines.</p>
</div>
<div class="paragraph">
<p>While it would be possible to develop new test suites in the TEAM Engine, this is not recommended as the TEAM Engine does not support many aspects of the ETF information model.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This <a href="http://opengeospatial.github.io/teamengine/testng-essentials.html">manual</a> has information for developing test suites for the Team Engine.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The TEAM Engine is primarily supported by ETF to allow that "native" Executable Test Suites for the test engines BaseX and SoapUI can declare dependencies to test suites developed for the TEAM Engine and so that ETF can execute these test suites using a remote TEAM Engine instance, typically the one hosted by OGC for their Compliance Program (CITE).</p>
</div>
<div class="paragraph">
<p>The test results reported by the TEAM Engine are transformed by ETF into the model of ETF for test results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_team_engine_test_suites_supported_by_etf">5.2. TEAM Engine test suites supported by ETF</h3>
<div class="paragraph">
<p>Test suites for the TEAM Engine may be written in CTL or TestNG.</p>
</div>
<div class="paragraph">
<p>A TEAM Engine test suite may be used in ETF, if it meets the following requirements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The test suite has been developed in TestNG (most recent and all new test suites are planned to be developed using TestNG).</p>
</li>
<li>
<p>The test suite can be invoked using a <a href="http://cite.opengeospatial.org/teamengine/rest/suites">simple REST API</a>.</p>
</li>
<li>
<p>The test suite accepts the same test objects as the ETF test suite (the OGC CITE WFS 2.0 test accepts a WFS 2.0 URL, which is also a well-known ETF Test Object Type; however, the OGC CITE GML 3.2 test accepts a URL of the single GML file whereas ETF accepts also multiple files in a ZIP archive as well as data upload instead of a public URL)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>TEAM Engine test suites that are currently registered in ETF as Executable Test Suite are listed in the following table:</p>
</div>
<table id="te-test-suites" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. TEAM Engine test suites registered in ETF</caption>
<colgroup>
<col style="width: 12.5%;">
<col style="width: 37.5%;">
<col style="width: 37.5%;">
<col style="width: 12.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Test suite</strong></th>
<th class="tableblock halign-left valign-top"><strong>ID in ETF</strong></th>
<th class="tableblock halign-left valign-top"><strong>Supported ETF Test Object Types</strong></th>
<th class="tableblock halign-left valign-top"><strong>URL</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WFS 2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">EID95a1b6fc-2b55-3d43-9502-3b8b605bda10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#soapui-test-object-types">OGC Web Feature Service 2.0</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="http://cite.opengeospatial.org/teamengine/rest/suites/wfs20/1.26/">Link</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The ID must be used in other Executable Test Suites to establish a dependency to a TEAM Engine test suite.</p>
</div>
<div class="paragraph">
<p>The TEAM Engine test suite is associated with a pre-defined <a href="#tags">Tag</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;etf:Tag id=&quot;EID268af871-5cf0-443e-834a-ce40bed6c0e3&quot;&gt;
  &lt;label&gt;OGC Test Suites (remote execution)&lt;/label&gt;
  &lt;description&gt;Executable Test Suites that are executed on a remote OGC TEAM Engine instance&lt;/description&gt;
  &lt;priority&gt;1000&lt;/priority&gt;
&lt;/etf:Tag&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>ETF currently does not support any CTL-based tests, which return test results in a different XML structure.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
One pre-condition for using an OGC CITE test suite is that it does not require pre-loading any data into the service under test. For older tests (for example, the WMS 1.x and WFS 1.x test suites) loading a pre-defined test dataset was a typical requirement. Those OGC CITE test suites may only be used to test a resource that uses the test data.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the future, it is <a href="https://github.com/opengeospatial/teamengine/issues/81">planned</a> to harmonize the XML format of all TEAM Engine test results using W3C EARL. Once that has been implemented - and ETF supports the EARL-based result format - also CTL-based test suites should be usable as long as they do not require any pre-loaded data and are accessible via the simple API.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_mapping_from_team_engine_testng_concepts_to_etf">5.3. Mapping from TEAM Engine / TestNG concepts to ETF</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Some information that is typically included in ETF test results is not included in the TEAM Engine reports and, therefore, cannot be included in the ETF test reports.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The OGC Team Engine results are in the JUnit XML format and are mapped
to the ETF results. The mapping is described in the following table.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Table 4. Mapping between OGC Team Engine and ETF test items</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>OGC Team Engine</strong></th>
<th class="tableblock halign-left valign-top"><strong>ETF</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">suite</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Task Result</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Module</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Case</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test-method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>not mapped</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Test Assertion</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The result status mapping is based on the following rules. The rules are
evaluated in descending order. The first applicable rule is applied.</p>
</div>
<table class="tableblock frame-all grid-all" style="width: 50%;">
<caption class="title">Table 5. Mapping between OGC Team Engine and ETF test results</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Rules for OGC Team Engine</strong></th>
<th class="tableblock halign-left valign-top"><strong>ETF result</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test-method status is <code>PASS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PASSED</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test-method status is <code>FAIL</code> and is-config is <code>true</code> and exception class is <code>java.lang.AssertionError</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT_APPLICABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test-method status is <code>FAIL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAILED</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test-method status is <code>SKIP</code> and exception class is <code>org.testng.SkipException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SKIPPED</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test-method status is <code>SKIP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NOT_APPLICABLE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">otherwise</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UNDEFINED</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>JUnit results having the status <code>PASS</code> and possessing the flag <code>is-config='true'</code>
are regarded as technical test steps and not recorded as they do not provide any
useful information for the user.</p>
</div>
<div class="paragraph">
<p>An example Junit XML result, generated by the OGC Team Engine, can be found <a href="https://raw.githubusercontent.com/interactive-instruments/etf-tetd/master/src/test/resources/response.xml">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="te-attachments">5.4. Attachments</h3>
<div class="paragraph">
<p>The original OGC Team Engine test results are always attached to the report with
the type <code>JunitXml</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 27. Example of an OGC Team Engine result attachment</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;Attachment id=&quot;EID02e4736f-d1a5-482a-966e-a94717f7f1d9&quot; type=&quot;JunitXml&quot;&gt;
  &lt;label&gt;TEAM Engine result&lt;/label&gt;
  &lt;encoding&gt;UTF-8&lt;/encoding&gt;
  &lt;mimeType&gt;text/xml&lt;/mimeType&gt;
  &lt;referencedData href=&quot;http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EID674c8b95-d447-4b91-aaae-21169657828f/Attachments/EID02e4736f-d1a5-482a-966e-a94717f7f1d9&quot;/&gt;
&lt;/Attachment&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The Junit XML result can be retrieved from the <code>referencedData</code> link.</p>
</div>
<div class="paragraph">
<p>If an unexpected error occurs, which prevents the OGC Team Engine from
generating a report, the error message is recorded as attachment of type <code>internalError</code>:</p>
</div>
<div class="exampleblock">
<div class="title">Example 28. Example of an OGC Team Engine internal error attachment</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="XML"><span></span>&lt;Attachment id=&quot;EID0783aa0d-8cd4-476a-86b5-c5432a7c1b46&quot; type=&quot;internalError&quot;&gt;
&lt;label&gt;Internal error&lt;/label&gt;
&lt;encoding&gt;UTF-8&lt;/encoding&gt;
&lt;mimeType&gt;text/html&lt;/mimeType&gt;
&lt;referencedData href=&quot;http://demo-inspire-next.etf-validator.net/etf-webapp/v2/TestTaskResults/EIDc631dc5f-2bf8-4169-8b36-ccdc85da710c/Attachments/EID0783aa0d-8cd4-476a-86b5-c5432a7c1b46&quot;/&gt;
&lt;/Attachment&gt;
&lt;/attachments&gt;
&lt;/Attachment&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_glossary">Glossary</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Glossary of key terms and definitions in ETF</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Term / Synonyms</strong></th>
<th class="tableblock halign-left valign-top"><strong>Definition</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">abstract test case</p>
<p class="tableblock">conformance test case</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test for a particular requirement or a set of related requirements</p>
<p class="tableblock"><em>Source: OGC Specification Model</em></p>
<p class="tableblock">NOTE: An abstract or conformance test case is a formal basis for deriving executable test cases. It should be complete in the sense that it is sufficient to enable a test verdict to be assigned unambiguously to each potentially observable test outcome.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">abstract test module</p>
<p class="tableblock">conformance test module</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set of related tests, all within a single conformance class</p>
<p class="tableblock"><em>Source: OGC Specification Model</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">abstract test suite</p>
<p class="tableblock">ATS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set of conformance classes that define tests for all requirements of a specification</p>
<p class="tableblock"><em>Source: derived from OGC Specification Model and ISO 19105</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">API</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set of routines, protocols, and tools for building software and applications</p>
<p class="tableblock"><em>Source: Wikipedia</em></p>
<p class="tableblock">NOTE: In the INSPIRE Test Framework, APIs are used for the internal communication between the components of the test framework and to allow machines to communicate with the INSPIRE Test Framework.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">conformance class</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set of conformance test modules that must be applied to receive a single certificate of conformance</p>
<p class="tableblock"><em>Source: OGC Specification Model</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">consistency test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test case that includes one or more test assertions involving information from both the test object and from a resource referenced from the test object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">executable test suite</p>
<p class="tableblock">ETS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set of executable test cases</p>
<p class="tableblock"><em>Source: ISO 19105</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">executable test suite set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set of executable test suites</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requirement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">expression in the content of a document conveying criteria to be fulfilled if compliance with the document is to be claimed and from which no deviation is permitted</p>
<p class="tableblock"><em>Source: ISO Directives Part 2</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">specification</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">document containing recommendations, requirements and conformance tests for those requirements</p>
<p class="tableblock"><em>Source: OGC Specification Model</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test assertion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">atomic test in a test step</p>
<p class="tableblock">NOTE: The assertion tests information retrieved from the test object in a test step against the an expected value based on the requirements associated with the test case.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test case</p>
<p class="tableblock">executable test case</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">specific test of an implementation to meet particular requirements</p>
<p class="tableblock"><em>Source: ISO 19105</em></p>
<p class="tableblock">NOTE: Instantiation of an abstract test case with values.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test driver</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">component of the test framework that communicates with a test engine during a test run</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test engine</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">a tool that executes an Executable Test Suite</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test framework</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">platform that supports multiple test engines, multiple test object types and the generation of harmonised test reports across the different test engines</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test object</p>
<p class="tableblock">SUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> asset / system under test</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test object type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">classification of a test object</p>
<p class="tableblock">NOTE: An Executable Test Suite declares which types of test objects it supports. This allows to determine which Executable Test Suites may be included in a test run against a test object. Test object types are structured in a hierarchical vocabulary.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test report</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">report derived from the test result</p>
<p class="tableblock">NOTE: reports may be human readable (HTML) or machine-readable (XML, JSON) and they may be structured in different ways (usually by test suite, module, case, step and assertion).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test result</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">result of a test run</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test run</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">execution of one or more test tasks</p>
<p class="tableblock">NOTE: in a test run one or more Executable Test Suites will be executed against one or more test objects.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test step</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">an interaction with a test object as part of a test case</p>
<p class="tableblock">NOTE: Multiple steps may be necessary to execute a test case. A test step will be, for example, a query on data or a request on a web service. The result of the interaction is then subject to assertions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">test task</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">execution of an Executable Test Suite against a test object</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">validation test</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">test case that is executed on the test object alone</p></td>
</tr>
</tbody>
</table>
<hr>
<div class="paragraph small">
<p><a href="https://www.interactive-instruments.de/en/about/impressum/">Legal Notice</a> | <a href="https://www.interactive-instruments.de/en/about/datenschutzerklarung/">Privacy Notice</a></p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-05-06 16:43:15 +0200
</div>
</div>
<link rel="stylesheet" href="../stylesheets/pygments-autumn.css">
</body>
</html>